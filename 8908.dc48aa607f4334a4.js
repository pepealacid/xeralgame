(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8908],{8908:($,D,L)=>{"use strict";L.r(D),L.d(D,{HomePageModule:()=>m});var g=L(1368),e=L(2112),f=L(4716),l=L(3332),r=L(1528),c=L(2648);class o{constructor(w,y,M,S,I){this.ctx=w,this.width=y,this.height=M,this.posX=S,this.posY=I,this.image=new Image,this.image.src="../../assets/img/background.png"}draw(){this.ctx.drawImage(this.image,this.posX,this.posY,this.width,this.height)}}class u{constructor(w,y,M,S,I){this.ctx=w,this.width=y,this.height=M,this.posX=S,this.posY=I,this.image=new Image,this.image.src="../../assets/img/container.png"}draw(){this.ctx.drawImage(this.image,this.posX,this.posY,this.width,this.height)}}class s{constructor(w){this.amplitude=20,this.frequency=.02,this.bubbleScale=1,this.textColor="black",this.textSize="bold 60px Arial",this.ctx=w,this.width=window.innerWidth/4,this.height=window.innerWidth/4,this.posX=40,this.posY=30,this.initialY=this.posY,this.image=new Image,this.image.src="../../assets/img/bubble.png"}draw(w,y){this.posY=this.initialY+Math.sin(w*this.frequency)*this.amplitude,this.ctx.drawImage(this.image,this.posX,this.posY,this.width*this.bubbleScale,this.height*this.bubbleScale),this.ctx.fillStyle=this.textColor,this.ctx.font=this.textSize;const M=this.posX+this.width/2,S=this.posY+this.height/2;this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(`${y}`,M,S)}animate(){const w=Date.now(),y=1e3,M=()=>{const I=Date.now()-w,B=I/y;B<1?(this.bubbleScale=1+.1*B,requestAnimationFrame(M)):I<2e3&&(this.bubbleScale=1.1-(I-y)/1e3*.1,requestAnimationFrame(M))},S=()=>{const I=Date.now()-w,B=I/y;if(B<1)this.textColor="red",this.textSize=`bold ${60+40*B}px Arial`,requestAnimationFrame(S);else if(I<2e3){const E=I-y;this.textColor="red",this.textSize=`bold ${100-40*E/1e3}px Arial`,requestAnimationFrame(S)}else this.textColor="black",this.textSize="bold 20px Arial"};M(),S()}}class t{constructor(w,y,M,S,I){this.velMOVE=3,this.ctx=w,this.width=y,this.height=M,this.posX=S,this.posY=I,this.image=new Image,this.image.src="../../assets/img/playerfull2.png",this.image.frames=6,this.image.framesIndex=0}draw(w){const y=this.image.width/3,M=this.image.height/2,S=Math.floor(this.image.framesIndex/3);this.ctx.drawImage(this.image,y*(this.image.framesIndex%3),M*S,y,M,this.posX,this.posY,this.width,this.height),this.animate(w)}drawLine(){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=5,this.ctx.moveTo(this.posX,this.posY),this.ctx.lineTo(this.posX,this.posY+870),this.ctx.stroke()}movement(w){w.forEach(y=>{y.includes("ArrowRight")&&this.posX<window.innerWidth-this.width+130?this.posX+=this.velMOVE:y.includes("ArrowLeft")&&this.posX>100&&(this.posX-=this.velMOVE)})}animate(w){w%10==0&&(this.image.framesIndex++,this.image.framesIndex>=this.image.frames&&(this.image.framesIndex=0))}}var i=L(6716);class n{constructor(w,y,M,S){switch(this.width=0,this.height=0,this.keyPressed=[],this.velMOVE=3,this.angle=0,this.ctx=w,this.posX=y,this.posY=M,this.image=new Image,this.index=S,this.index){case 0:this.width=40,this.height=40;break;case 1:this.width=60,this.height=60;break;case 2:this.width=100,this.height=100;break;case 3:this.width=140,this.height=140;break;case 4:this.width=180,this.height=180;break;case 5:this.width=200,this.height=200;break;case 6:this.width=240,this.height=240;break;case 7:this.width=300,this.height=300}this.image.src=`../../assets/img/fruits/${i.O.theme}/${this.index}_fruit.png`,this.setEvents()}draw(){this.ctx.save(),this.ctx.translate(this.posX+this.width/2,this.posY+this.height/2),this.ctx.rotate(this.angle),this.ctx.drawImage(this.image,-this.width/2,-this.height/2,this.width,this.height),this.ctx.restore()}rotate(w){this.angle=w}setEvents(){document.addEventListener("keydown",w=>{const{code:y}=w;if("ArrowRight"!==y||this.keyPressed.includes("ArrowRight")){if("ArrowLeft"!==y||this.keyPressed.includes("ArrowLeft"))return;this.keyPressed.push("ArrowLeft")}else this.keyPressed.push("ArrowRight")}),document.addEventListener("keyup",w=>{const{code:y}=w;"ArrowLeft"!==y&&"ArrowRight"!==y||(this.keyPressed=[])})}setPosition(w,y){w>70&&w<window.innerWidth-70&&(this.posX=w),this.posY=y}}var a=L(4496);const v=["canvas"],C=["game-container"],A=["leftDiv"],P=["rightDiv"],d=[{path:"",component:(()=>{var x;class w{constructor(M,S){this.actionSheetCtrl=M,this.gestureCtrl=S,this.score=0,this.FPS=60,this.shouldPlay=!0,this.disableAction=!1,this.fruits=[],this.bodyMovement=[],this.framesCounter=0,this.shouldAddScore=!0,this.playingMusic=!0,this.radiusDictionary={0:20,1:30,2:50,3:70,4:90,5:100,6:120,7:150},this.wallsAdded=!1,this.lastOnStart=0,this.DOUBLE_CLICK_THRESHOLD=500,this.setEvents()}ngOnInit(){this.setContext(),this.setDimensions()}startGame(){this.start(),this.drawAll(),this.addFruit()}leftClick(){console.log("left"),this.bodyMovement.push("ArrowLeft")}rightClick(){console.log("right"),this.bodyMovement.push("ArrowRight")}clearMovement(){this.bodyMovement=[]}ngAfterViewInit(){this.gestureCtrl.create({el:this.leftDiv.nativeElement,threshold:0,gestureName:"tap",onStart:()=>{this.leftClick()},onEnd:()=>{this.clearMovement()}}).enable(),this.gestureCtrl.create({el:this.rightDiv.nativeElement,threshold:0,gestureName:"tap",onStart:()=>{this.rightClick()},onEnd:()=>{this.clearMovement()}}).enable()}restartGame(){clearInterval(this.interval),this.setContext(),this.setDimensions(),this.start(),this.drawAll(),this.fruits=[],this.addFruit()}onStart(){const M=Date.now();Math.abs(M-this.lastOnStart)<=this.DOUBLE_CLICK_THRESHOLD?(console.log("DOUBLE CLICK"),this.releaseFruit(),this.lastOnStart=0):this.lastOnStart=M}setContext(){this.canvas=this.myCanvas.nativeElement,this.context=this.canvas.getContext("2d"),this.backgroundMusic=new Audio,this.backgroundMusic.src="../../../assets/audio/background_music.mp3",this.backgroundMusic.load(),this.engine=c.Engine.create(),this.render=c.Render.create({engine:this.engine,element:this.gameContainer,options:{wireframes:!1,width:window.innerWidth,height:window.innerHeight-300}}),c.Runner.run(this.engine),this.world=this.engine.world}setDimensions(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.setAttribute("width",`${this.width.toString()}px`),this.canvas.setAttribute("height",`${this.height.toString()}px`)}start(){this.reset(),this.backgroundMusic.play(),this.backgroundMusic.loop=!0,this.interval=setInterval(()=>{this.framesCounter++,this.framesCounter>3e3&&(this.framesCounter=0),this.drawAll(),this.detectCollisions()},1e3/this.FPS)}reset(){this.background=new o(this.context,this.width,this.height,0,0),console.log(this.bodyMovement),this.player=new t(this.context,window.innerWidth/3,150,this.width/2-25,window.innerHeight/5),this.container=new u(this.context,this.width,this.height,0,0),this.bubbleScore=new s(this.context)}drawAll(){this.background.draw(),this.player.draw(this.framesCounter),this.player.drawLine(),this.container.draw(),this.bubbleScore.draw(this.framesCounter,this.score),this.player.movement(this.bodyMovement),this.bodyMovementFunc(),this.fruits.forEach(S=>{const{body:I,fruit:B}=S;B.rotate(I.angle),B.setPosition(I.position.x-I.circleRadius,I.position.y-I.circleRadius),B.draw()}),this.context.fillStyle="rgba(128, 128, 128, 0.6)",this.world.bodies.forEach(S=>{const I=S.vertices;this.context.beginPath(),this.context.moveTo(I[0].x,I[0].y);for(let B=1;B<I.length;B++)this.context.lineTo(I[B].x,I[B].y);this.context.closePath(),this.context.fill()})}detectCollisions(){console.log(""),c.Events.on(this.engine,"collisionStart",M=>{M.pairs.forEach(S=>{if(S.bodyA.label===S.bodyB.label&&"7"!==S.bodyA.label){const I=S.bodyA.id,B=S.bodyB.id;if(this.lastBodyA!==S.bodyA&&this.lastBodyB!==S.bodyB){if(this.playingMusic){const T=new Audio;T.src="../../../assets/audio/blub.mp3",T.load(),T.play()}this.score+=Number(S.bodyA.label)+1,this.bubbleScore.animate()}this.lastBodyA=S.bodyA,this.lastBodyB=S.bodyB;const E=this.fruits.findIndex(T=>T.body.id===I),R=this.fruits.findIndex(T=>T.body.id===B);if(-1!==E&&-1!==R)if(E>R){const{body:T}=this.fruits[E],{body:H}=this.fruits[R];c.World.remove(this.world,[T,H]),this.fruits.splice(E,1),this.fruits.splice(R,1),console.log(T.position.x-T.circleRadius);const k=new n(this.context,T.position.x-T.circleRadius,T.position.y,Number(T.label)+1);console.log(k.posX);const V=c.Bodies.circle(k.posX,k.posY,this.radiusDictionary[Number(T.label)+1],{label:(Number(T.label)+1).toString(),isSleeping:!1,restitution:.3,friction:1,frictionAir:.01,isStatic:!1});this.fruits.push({body:V,fruit:k}),c.World.add(this.world,[V])}else{const{body:T}=this.fruits[E],{body:H}=this.fruits[R];c.World.remove(this.world,[H,T]),this.fruits.splice(R,1),this.fruits.splice(E,1);const k=new n(this.context,T.position.x-T.circleRadius,T.position.y,Number(T.label)+1);console.log(T.position.x-T.circleRadius),console.log(k.posX);const V=c.Bodies.circle(k.posX,k.posY,this.radiusDictionary[Number(T.label)+1],{label:(Number(T.label)+1).toString(),isSleeping:!1,restitution:.3,friction:1,frictionAir:.01,isStatic:!1});this.fruits.push({body:V,fruit:k}),c.World.add(this.world,[V])}}else if(S.bodyA.label===S.bodyB.label&&"7"===S.bodyA.label){console.log("DOS MELONES");const I=S.bodyA.id,B=S.bodyB.id,E=this.fruits.findIndex(T=>T.body.id===I),R=this.fruits.findIndex(T=>T.body.id===B);if(-1!==E&&-1!==R)if(E>R){const{body:T,fruit:F}=this.fruits[E],{body:H,fruit:O}=this.fruits[R];console.log(F,O),c.World.remove(this.world,[T,H]),this.fruits.splice(E,1),this.fruits.splice(R,1)}else{const{body:T,fruit:F}=this.fruits[E],{body:H,fruit:O}=this.fruits[R];console.log(F,O),c.World.remove(this.world,[H,T]),this.fruits.splice(R,1),this.fruits.splice(E,1)}}})})}bodyMovementFunc(){var M;if(null!==(M=this.currentBody)&&void 0!==M&&M.isSleeping){var S,I;let R=null===(S=this.currentBody)||void 0===S||null===(S=S.vertices[0])||void 0===S?void 0:S.x,T=null===(I=this.currentBody)||void 0===I||null===(I=I.vertices[0])||void 0===I?void 0:I.x;for(let H=1;H<(null===(B=this.currentBody)||void 0===B||null===(B=B.vertices)||void 0===B?void 0:B.length);H++){var B,E;const O=null===(E=this.currentBody)||void 0===E?void 0:E.vertices[H];O.x<R?R=O.x:O.x>T&&(T=O.x)}const F=T-R;this.bodyMovement.includes("ArrowRight")&&this.currentBody.position.x-2*this.currentBody.circleRadius<window.innerWidth-F-this.currentBody.circleRadius?c.Body.setPosition(this.currentBody,{x:this.currentBody.position.x+3,y:this.currentBody.position.y}):this.bodyMovement.includes("ArrowLeft")&&this.currentBody.position.x>this.currentBody.circleRadius+70&&c.Body.setPosition(this.currentBody,{x:this.currentBody.position.x-3,y:this.currentBody.position.y})}}clear(){this.context.clearRect(0,0,this.width,this.height)}addFruit(){const M=Math.floor(2*Math.random());let S;switch(M){case 0:default:S=20;break;case 1:S=30;break;case 2:S=50}const I=c.Bodies.circle(this.player.posX,this.player.posY+40,S,{label:M.toString(),isSleeping:!0,restitution:.3,friction:1,frictionAir:.01,isStatic:!1}),B=new n(this.context,this.player.posX-S,this.player.posY+40-S,M);B.setPosition(this.player.posX-S,this.player.posY-S),this.currentBody=I,this.currentFruit=B,this.fruits.push({body:I,fruit:B});const E=c.Bodies.rectangle(0,window.innerHeight-window.innerHeight/6,window.innerWidth+1e3,50,{isStatic:!0}),R=c.Bodies.rectangle(0,window.innerHeight-250,window.innerHeight/8,this.height,{isStatic:!0}),T=c.Bodies.rectangle(window.innerWidth-8,window.innerHeight-250,window.innerHeight/8,this.height,{isStatic:!0});c.World.add(this.world,[this.currentBody,E,R,T])}releaseFruit(){if(this.shouldPlay&&(this.shouldPlay=!1),!this.disableAction){if(this.currentBody.isSleeping=!1,this.disableAction=!0,this.playingMusic){const M=new Audio;M.src="../../../assets/audio/cae.mp3",M.load(),M.play()}setTimeout(()=>{this.addFruit(),this.disableAction=!1,this.shouldPlay=!0},1e3)}}setEvents(){document.addEventListener("keydown",M=>{const{code:S}=M;if("Space"===S)this.releaseFruit();else if("ArrowRight"!==S||this.bodyMovement.includes("ArrowRight")){if("ArrowLeft"!==S||this.bodyMovement.includes("ArrowLeft"))return;this.bodyMovement.push("ArrowLeft")}else this.bodyMovement.push("ArrowRight")}),document.addEventListener("keyup",M=>{const{code:S}=M;"ArrowLeft"!==S&&"ArrowRight"!==S||(this.bodyMovement=[])})}generateUniqueId(){return Math.floor(1e6*Math.random())}handleMusic(){var M=this;return(0,r.c)(function*(){M.playingMusic=!M.playingMusic,M.playingMusic?M.backgroundMusic.play():M.backgroundMusic.pause()})()}}return(x=w).\u0275fac=function(M){return new(M||x)(a.GI1(e.MR),a.GI1(e.Qz))},x.\u0275cmp=a.In1({type:x,selectors:[["app-home"]],viewQuery:function(M,S){if(1&M&&(a.CC$(v,7),a.CC$(C,7),a.CC$(A,7),a.CC$(P,7)),2&M){let I;a.wto(I=a.Gqi())&&(S.myCanvas=I.first),a.wto(I=a.Gqi())&&(S.gameContainer=I.first),a.wto(I=a.Gqi())&&(S.leftDiv=I.first),a.wto(I=a.Gqi())&&(S.rightDiv=I.first)}},decls:11,vars:1,consts:[["id","game-container"],["id","leftDiv",1,"half-screen"],["leftDiv",""],["id","rightDiv",1,"half-screen"],["rightDiv",""],[1,"music-button",3,"click"],[1,"release-button",3,"click"],["canvas",""]],template:function(M,S){1&M&&(a.I0R(0,"div",0),a.wR5(1,"div",1,2)(3,"div",3,4),a.I0R(5,"ion-button",5),a.qCj("click",function(){return S.handleMusic()}),a.OEk(6),a.C$Y(),a.I0R(7,"ion-button",6),a.qCj("click",function(){return S.releaseFruit()}),a.OEk(8,"Tira!"),a.C$Y(),a.wR5(9,"canvas",null,7),a.C$Y()),2&M&&(a.yG2(6),a.cNF(S.playingMusic?"\u{1f50a}":"\u{1f507}"))},dependencies:[e.sn],styles:["ion-button[_ngcontent-%COMP%]{position:absolute;background-color:transparent!important;--background-color: transparent !important;--background: transparent !important;font-size:30px;right:0}.half-screen[_ngcontent-%COMP%]{flex:1}#leftDiv[_ngcontent-%COMP%]{position:absolute;background-color:#fff0;height:90vh;width:50vw}#rightDiv[_ngcontent-%COMP%]{position:absolute;background-color:#fff0;height:90vh;width:50vw;left:50vw}.release-button[_ngcontent-%COMP%]{position:absolute;background-color:transparent!important;--background-color: transparent !important;--background: transparent !important;font-size:30px;right:0;top:80vh;width:100vw;height:10vh;text-align:center}.music-button[_ngcontent-%COMP%]{font-size:50px}"]}),w})()}];let p=(()=>{var x;class w{}return(x=w).\u0275fac=function(M){return new(M||x)},x.\u0275mod=a.a4G({type:x}),x.\u0275inj=a.s3X({imports:[l.qQ.forChild(d),l.qQ]}),w})(),m=(()=>{var x;class w{}return(x=w).\u0275fac=function(M){return new(M||x)},x.\u0275mod=a.a4G({type:x}),x.\u0275inj=a.s3X({imports:[g.MD,f.y,e.wZ,p]}),w})()},2648:function($){$.exports=function(D){var L={};function g(e){if(L[e])return L[e].exports;var f=L[e]={i:e,l:!1,exports:{}};return D[e].call(f.exports,f,f.exports,g),f.l=!0,f.exports}return g.m=D,g.c=L,g.d=function(e,f,l){g.o(e,f)||Object.defineProperty(e,f,{enumerable:!0,get:l})},g.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,f){if(1&f&&(e=g(e)),8&f||4&f&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(g.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&f&&"string"!=typeof e)for(var r in e)g.d(l,r,function(c){return e[c]}.bind(null,r));return l},g.n=function(e){var f=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(f,"a",f),f},g.o=function(e,f){return Object.prototype.hasOwnProperty.call(e,f)},g.p="",g(g.s=20)}([function(D,L){var g={};D.exports=g,function(){g._baseDelta=1e3/60,g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(f,l){var r,o;"boolean"==typeof l?(r=2,o=l):(r=1,o=!0);for(var u=r;u<arguments.length;u++){var s=arguments[u];if(s)for(var t in s)!o||!s[t]||s[t].constructor!==Object||f[t]&&f[t].constructor!==Object?f[t]=s[t]:(f[t]=f[t]||{},g.extend(f[t],o,s[t]))}return f},g.clone=function(f,l){return g.extend({},l,f)},g.keys=function(f){if(Object.keys)return Object.keys(f);var l=[];for(var r in f)l.push(r);return l},g.values=function(f){var l=[];if(Object.keys){for(var r=Object.keys(f),c=0;c<r.length;c++)l.push(f[r[c]]);return l}for(var o in f)l.push(f[o]);return l},g.get=function(f,l,r,c){l=l.split(".").slice(r,c);for(var o=0;o<l.length;o+=1)f=f[l[o]];return f},g.set=function(f,l,r,c,o){var u=l.split(".").slice(c,o);return g.get(f,l,0,-1)[u[u.length-1]]=r,r},g.shuffle=function(f){for(var l=f.length-1;l>0;l--){var r=Math.floor(g.random()*(l+1)),c=f[l];f[l]=f[r],f[r]=c}return f},g.choose=function(f){return f[Math.floor(g.random()*f.length)]},g.isElement=function(f){return typeof HTMLElement<"u"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},g.isArray=function(f){return"[object Array]"===Object.prototype.toString.call(f)},g.isFunction=function(f){return"function"==typeof f},g.isPlainObject=function(f){return"object"==typeof f&&f.constructor===Object},g.isString=function(f){return"[object String]"===toString.call(f)},g.clamp=function(f,l,r){return f<l?l:f>r?r:f},g.sign=function(f){return f<0?-1:1},g.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(f,l){return l=typeof l<"u"?l:1,(f=typeof f<"u"?f:0)+e()*(l-f)};var e=function(){return g._seed=(9301*g._seed+49297)%233280,g._seed/233280};g.colorToNumber=function(f){return 3==(f=f.replace("#","")).length&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var f=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[f]||(g.warn(f),g._warnedOnce[f]=!0)},g.deprecated=function(f,l,r){f[l]=g.chain(function(){g.warnOnce("\u{1f505} deprecated \u{1f505}",r)},f[l])},g.nextId=function(){return g._nextId++},g.indexOf=function(f,l){if(f.indexOf)return f.indexOf(l);for(var r=0;r<f.length;r++)if(f[r]===l)return r;return-1},g.map=function(f,l){if(f.map)return f.map(l);for(var r=[],c=0;c<f.length;c+=1)r.push(l(f[c]));return r},g.topologicalSort=function(f){var l=[],r=[],c=[];for(var o in f)!r[o]&&!c[o]&&g._topologicalSort(o,r,c,f,l);return l},g._topologicalSort=function(f,l,r,c,o){var u=c[f]||[];r[f]=!0;for(var s=0;s<u.length;s+=1){var t=u[s];r[t]||l[t]||g._topologicalSort(t,l,r,c,o)}r[f]=!1,l[f]=!0,o.push(f)},g.chain=function(){for(var f=[],l=0;l<arguments.length;l+=1){var r=arguments[l];r._chained?f.push.apply(f,r._chained):f.push(r)}var c=function(){for(var o,u=new Array(arguments.length),s=0,t=arguments.length;s<t;s++)u[s]=arguments[s];for(s=0;s<f.length;s+=1){var i=f[s].apply(o,u);typeof i<"u"&&(o=i)}return o};return c._chained=f,c},g.chainPathBefore=function(f,l,r){return g.set(f,l,g.chain(r,g.get(f,l)))},g.chainPathAfter=function(f,l,r){return g.set(f,l,g.chain(g.get(f,l),r))},g.setDecomp=function(f){g._decomp=f},g.getDecomp=function(){var f=g._decomp;try{!f&&typeof window<"u"&&(f=window.decomp),!f&&typeof global<"u"&&(f=global.decomp)}catch{f=null}return f}}()},function(D,L){var g={};D.exports=g,g.create=function(e){var f={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(f,e),f},g.update=function(e,f,l){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<f.length;r++){var c=f[r];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}l&&(l.x>0?e.max.x+=l.x:e.min.x+=l.x,l.y>0?e.max.y+=l.y:e.min.y+=l.y)},g.contains=function(e,f){return f.x>=e.min.x&&f.x<=e.max.x&&f.y>=e.min.y&&f.y<=e.max.y},g.overlaps=function(e,f){return e.min.x<=f.max.x&&e.max.x>=f.min.x&&e.max.y>=f.min.y&&e.min.y<=f.max.y},g.translate=function(e,f){e.min.x+=f.x,e.max.x+=f.x,e.min.y+=f.y,e.max.y+=f.y},g.shift=function(e,f){var l=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=f.x,e.max.x=f.x+l,e.min.y=f.y,e.max.y=f.y+r}},function(D,L){var g={};D.exports=g,g.create=function(e,f){return{x:e||0,y:f||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,f,l){var r=Math.cos(f),c=Math.sin(f);l||(l={});var o=e.x*r-e.y*c;return l.y=e.x*c+e.y*r,l.x=o,l},g.rotateAbout=function(e,f,l,r){var c=Math.cos(f),o=Math.sin(f);r||(r={});var u=l.x+((e.x-l.x)*c-(e.y-l.y)*o);return r.y=l.y+((e.x-l.x)*o+(e.y-l.y)*c),r.x=u,r},g.normalise=function(e){var f=g.magnitude(e);return 0===f?{x:0,y:0}:{x:e.x/f,y:e.y/f}},g.dot=function(e,f){return e.x*f.x+e.y*f.y},g.cross=function(e,f){return e.x*f.y-e.y*f.x},g.cross3=function(e,f,l){return(f.x-e.x)*(l.y-e.y)-(f.y-e.y)*(l.x-e.x)},g.add=function(e,f,l){return l||(l={}),l.x=e.x+f.x,l.y=e.y+f.y,l},g.sub=function(e,f,l){return l||(l={}),l.x=e.x-f.x,l.y=e.y-f.y,l},g.mult=function(e,f){return{x:e.x*f,y:e.y*f}},g.div=function(e,f){return{x:e.x/f,y:e.y/f}},g.perp=function(e,f){return{x:(f=!0===f?-1:1)*-e.y,y:f*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,f){return Math.atan2(f.y-e.y,f.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]},function(D,L,g){var e={};D.exports=e;var f=g(2),l=g(0);e.create=function(r,c){for(var o=[],u=0;u<r.length;u++){var s=r[u];o.push({x:s.x,y:s.y,index:u,body:c,isInternal:!1})}return o},e.fromPath=function(r,c){var u=[];return r.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(s,t,i){u.push({x:parseFloat(t),y:parseFloat(i)})}),e.create(u,c)},e.centre=function(r){for(var u,s,t,c=e.area(r,!0),o={x:0,y:0},i=0;i<r.length;i++)u=f.cross(r[i],r[t=(i+1)%r.length]),s=f.mult(f.add(r[i],r[t]),u),o=f.add(o,s);return f.div(o,6*c)},e.mean=function(r){for(var c={x:0,y:0},o=0;o<r.length;o++)c.x+=r[o].x,c.y+=r[o].y;return f.div(c,r.length)},e.area=function(r,c){for(var o=0,u=r.length-1,s=0;s<r.length;s++)o+=(r[u].x-r[s].x)*(r[u].y+r[s].y),u=s;return c?o/2:Math.abs(o)/2},e.inertia=function(r,c){for(var t,i,o=0,u=0,s=r,n=0;n<s.length;n++)i=(n+1)%s.length,o+=(t=Math.abs(f.cross(s[i],s[n])))*(f.dot(s[i],s[i])+f.dot(s[i],s[n])+f.dot(s[n],s[n])),u+=t;return c/6*(o/u)},e.translate=function(r,c,o){var i,u=r.length,s=c.x*(o=typeof o<"u"?o:1),t=c.y*o;for(i=0;i<u;i++)r[i].x+=s,r[i].y+=t;return r},e.rotate=function(r,c,o){if(0!==c){var a,v,C,A,u=Math.cos(c),s=Math.sin(c),t=o.x,i=o.y,n=r.length;for(A=0;A<n;A++)(a=r[A]).x=t+((v=a.x-t)*u-(C=a.y-i)*s),a.y=i+(v*s+C*u);return r}},e.contains=function(r,c){for(var i,o=c.x,u=c.y,s=r.length,t=r[s-1],n=0;n<s;n++){if((o-t.x)*((i=r[n]).y-t.y)+(u-t.y)*(t.x-i.x)>0)return!1;t=i}return!0},e.scale=function(r,c,o,u){if(1===c&&1===o)return r;u=u||e.centre(r);for(var t,i=0;i<r.length;i++)t=f.sub(r[i],u),r[i].x=u.x+t.x*c,r[i].y=u.y+t.y*o;return r},e.chamfer=function(r,c,o,u,s){c="number"==typeof c?[c]:c||[8],o=typeof o<"u"?o:-1,u=u||2,s=s||14;for(var t=[],i=0;i<r.length;i++){var n=r[i-1>=0?i-1:r.length-1],a=r[i],v=r[(i+1)%r.length],C=c[i<c.length?i:c.length-1];if(0!==C){var A=f.normalise({x:a.y-n.y,y:n.x-a.x}),P=f.normalise({x:v.y-a.y,y:a.x-v.x}),h=Math.sqrt(2*Math.pow(C,2)),d=f.mult(l.clone(A),C),p=f.normalise(f.mult(f.add(A,P),.5)),m=f.sub(a,f.mult(p,h)),x=o;-1===o&&(x=1.75*Math.pow(C,.32)),(x=l.clamp(x,u,s))%2==1&&(x+=1);for(var y=Math.acos(f.dot(A,P))/x,M=0;M<x;M++)t.push(f.add(f.rotate(d,y*M),m))}else t.push(a)}return t},e.clockwiseSort=function(r){var c=e.mean(r);return r.sort(function(o,u){return f.angle(c,o)-f.angle(c,u)}),r},e.isConvex=function(r){var u,s,t,i,c=0,o=r.length;if(o<3)return null;for(u=0;u<o;u++)if(i=(r[s=(u+1)%o].x-r[u].x)*(r[t=(u+2)%o].y-r[s].y),(i-=(r[s].y-r[u].y)*(r[t].x-r[s].x))<0?c|=1:i>0&&(c|=2),3===c)return!1;return 0!==c||null},e.hull=function(r){var u,s,c=[],o=[];for((r=r.slice(0)).sort(function(t,i){var n=t.x-i.x;return 0!==n?n:t.y-i.y}),s=0;s<r.length;s+=1){for(u=r[s];o.length>=2&&f.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(s=r.length-1;s>=0;s-=1){for(u=r[s];c.length>=2&&f.cross3(c[c.length-2],c[c.length-1],u)<=0;)c.pop();c.push(u)}return c.pop(),o.pop(),c.concat(o)}},function(D,L,g){var e={};D.exports=e;var f=g(3),l=g(2),r=g(7),c=g(0),o=g(1),u=g(11);!function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var i={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:f.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},n=c.extend(i,t);return s(n,t),n},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var s=function(t,i){i=i||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||l.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),f.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var n=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),a=t.isStatic?"#555":"#ccc",v=t.isStatic&&null===t.render.fillStyle?1:0;t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||a,t.render.lineWidth=t.render.lineWidth||v,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,i,n){var a;for(a in"string"==typeof i&&(a=i,(i={})[a]=n),i)if(Object.prototype.hasOwnProperty.call(i,a))switch(n=i[a],a){case"isStatic":e.setStatic(t,n);break;case"isSleeping":r.set(t,n);break;case"mass":e.setMass(t,n);break;case"density":e.setDensity(t,n);break;case"inertia":e.setInertia(t,n);break;case"vertices":e.setVertices(t,n);break;case"position":e.setPosition(t,n);break;case"angle":e.setAngle(t,n);break;case"velocity":e.setVelocity(t,n);break;case"angularVelocity":e.setAngularVelocity(t,n);break;case"speed":e.setSpeed(t,n);break;case"angularSpeed":e.setAngularSpeed(t,n);break;case"parts":e.setParts(t,n);break;case"centre":e.setCentre(t,n);break;default:t[a]=n}},e.setStatic=function(t,i){for(var n=0;n<t.parts.length;n++){var a=t.parts[n];a.isStatic=i,i?(a._original={restitution:a.restitution,friction:a.friction,mass:a.mass,inertia:a.inertia,density:a.density,inverseMass:a.inverseMass,inverseInertia:a.inverseInertia},a.restitution=0,a.friction=1,a.mass=a.inertia=a.density=1/0,a.inverseMass=a.inverseInertia=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.angularVelocity=0,a.speed=0,a.angularSpeed=0,a.motion=0):a._original&&(a.restitution=a._original.restitution,a.friction=a._original.friction,a.mass=a._original.mass,a.inertia=a._original.inertia,a.density=a._original.density,a.inverseMass=a._original.inverseMass,a.inverseInertia=a._original.inverseInertia,a._original=null)}},e.setMass=function(t,i){t.inertia=t.inertia/(t.mass/6)*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){t.vertices=i[0].body===t?i:f.create(i,t),t.axes=u.fromVertices(t.vertices),t.area=f.area(t.vertices),e.setMass(t,t.density*t.area);var n=f.centre(t.vertices);f.translate(t.vertices,n,-1),e.setInertia(t,e._inertiaScale*f.inertia(t.vertices,t.mass)),f.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,n){var a;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,a=0;a<i.length;a++){var v=i[a];v!==t&&(v.parent=t,t.parts.push(v))}if(1!==t.parts.length){if(n=!(typeof n<"u")||n){var C=[];for(a=0;a<i.length;a++)C=C.concat(i[a].vertices);f.clockwiseSort(C);var A=f.hull(C),P=f.centre(A);e.setVertices(t,A),f.translate(t.vertices,P)}var h=e._totalProperties(t);t.area=h.area,t.parent=t,t.position.x=h.centre.x,t.position.y=h.centre.y,t.positionPrev.x=h.centre.x,t.positionPrev.y=h.centre.y,e.setMass(t,h.mass),e.setInertia(t,h.inertia),e.setPosition(t,h.centre)}},e.setCentre=function(t,i,n){n?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},e.setPosition=function(t,i,n){var a=l.sub(i,t.position);n?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=a.x,t.velocity.y=a.y,t.speed=l.magnitude(a)):(t.positionPrev.x+=a.x,t.positionPrev.y+=a.y);for(var v=0;v<t.parts.length;v++){var C=t.parts[v];C.position.x+=a.x,C.position.y+=a.y,f.translate(C.vertices,a),o.update(C.bounds,C.vertices,t.velocity)}},e.setAngle=function(t,i,n){var a=i-t.angle;n?(t.anglePrev=t.angle,t.angularVelocity=a,t.angularSpeed=Math.abs(a)):t.anglePrev+=a;for(var v=0;v<t.parts.length;v++){var C=t.parts[v];C.angle+=a,f.rotate(C.vertices,a,t.position),u.rotate(C.axes,a),o.update(C.bounds,C.vertices,t.velocity),v>0&&l.rotateAbout(C.position,a,t.position,C.position)}},e.setVelocity=function(t,i){var n=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-i.x*n,t.positionPrev.y=t.position.y-i.y*n,t.velocity.x=(t.position.x-t.positionPrev.x)/n,t.velocity.y=(t.position.y-t.positionPrev.y)/n,t.speed=l.magnitude(t.velocity)},e.getVelocity=function(t){var i=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*i,y:(t.position.y-t.positionPrev.y)*i}},e.getSpeed=function(t){return l.magnitude(e.getVelocity(t))},e.setSpeed=function(t,i){e.setVelocity(t,l.mult(l.normalise(e.getVelocity(t)),i))},e.setAngularVelocity=function(t,i){var n=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-i*n,t.angularVelocity=(t.angle-t.anglePrev)/n,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,i){e.setAngularVelocity(t,c.sign(e.getAngularVelocity(t))*i)},e.translate=function(t,i,n){e.setPosition(t,l.add(t.position,i),n)},e.rotate=function(t,i,n,a){if(n){var v=Math.cos(i),C=Math.sin(i),A=t.position.x-n.x,P=t.position.y-n.y;e.setPosition(t,{x:n.x+(A*v-P*C),y:n.y+(A*C+P*v)},a),e.setAngle(t,t.angle+i,a)}else e.setAngle(t,t.angle+i,a)},e.scale=function(t,i,n,a){var v=0,C=0;a=a||t.position;for(var A=0;A<t.parts.length;A++){var P=t.parts[A];f.scale(P.vertices,i,n,a),P.axes=u.fromVertices(P.vertices),P.area=f.area(P.vertices),e.setMass(P,t.density*P.area),f.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),e.setInertia(P,e._inertiaScale*f.inertia(P.vertices,P.mass)),f.translate(P.vertices,{x:P.position.x,y:P.position.y}),A>0&&(v+=P.area,C+=P.inertia),P.position.x=a.x+(P.position.x-a.x)*i,P.position.y=a.y+(P.position.y-a.y)*n,o.update(P.bounds,P.vertices,t.velocity)}t.parts.length>1&&(t.area=v,t.isStatic||(e.setMass(t,t.density*v),e.setInertia(t,C))),t.circleRadius&&(i===n?t.circleRadius*=i:t.circleRadius=null)},e.update=function(t,i){var n=(i=(typeof i<"u"?i:1e3/60)*t.timeScale)*i,a=e._timeCorrection?i/(t.deltaTime||i):1,v=1-t.frictionAir*(i/c._baseDelta),A=(t.position.y-t.positionPrev.y)*a;t.velocity.x=(t.position.x-t.positionPrev.x)*a*v+t.force.x/t.mass*n,t.velocity.y=A*v+t.force.y/t.mass*n,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=i,t.angularVelocity=(t.angle-t.anglePrev)*v*a+t.torque/t.inertia*n,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var P=0;P<t.parts.length;P++){var h=t.parts[P];f.translate(h.vertices,t.velocity),P>0&&(h.position.x+=t.velocity.x,h.position.y+=t.velocity.y),0!==t.angularVelocity&&(f.rotate(h.vertices,t.angularVelocity,t.position),u.rotate(h.axes,t.angularVelocity),P>0&&l.rotateAbout(h.position,t.angularVelocity,t.position,h.position)),o.update(h.bounds,h.vertices,t.velocity)}},e.updateVelocities=function(t){var i=e._baseDelta/t.deltaTime,n=t.velocity;n.x=(t.position.x-t.positionPrev.x)*i,n.y=(t.position.y-t.positionPrev.y)*i,t.speed=Math.sqrt(n.x*n.x+n.y*n.y),t.angularVelocity=(t.angle-t.anglePrev)*i,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,i,n){var a_x=i.x-t.position.x,a_y=i.y-t.position.y;t.force.x+=n.x,t.force.y+=n.y,t.torque+=a_x*n.y-a_y*n.x},e._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var a=t.parts[n],v=a.mass!==1/0?a.mass:1;i.mass+=v,i.area+=a.area,i.inertia+=a.inertia,i.centre=l.add(i.centre,l.mult(a.position,v))}return i.centre=l.div(i.centre,i.mass),i}}()},function(D,L,g){var e={};D.exports=e;var f=g(0);e.on=function(l,r,c){for(var u,o=r.split(" "),s=0;s<o.length;s++)u=o[s],l.events=l.events||{},l.events[u]=l.events[u]||[],l.events[u].push(c);return c},e.off=function(l,r,c){if(r){"function"==typeof r&&(c=r,r=f.keys(l.events).join(" "));for(var o=r.split(" "),u=0;u<o.length;u++){var s=l.events[o[u]],t=[];if(c&&s)for(var i=0;i<s.length;i++)s[i]!==c&&t.push(s[i]);l.events[o[u]]=t}}else l.events={}},e.trigger=function(l,r,c){var o,u,s,t,i=l.events;if(i&&f.keys(i).length>0){c||(c={}),o=r.split(" ");for(var n=0;n<o.length;n++)if(s=i[u=o[n]]){(t=f.clone(c,!1)).name=u,t.source=l;for(var a=0;a<s.length;a++)s[a].apply(l,[t])}}}},function(D,L,g){var e={};D.exports=e;var f=g(5),l=g(0),r=g(1),c=g(4);e.create=function(o){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,u,s,t){if(o.isModified=u,u&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),s&&o.parent&&e.setModified(o.parent,u,s,t),t)for(var i=0;i<o.composites.length;i++)e.setModified(o.composites[i],u,s,t)},e.add=function(o,u){var s=[].concat(u);f.trigger(o,"beforeAdd",{object:u});for(var t=0;t<s.length;t++){var i=s[t];switch(i.type){case"body":if(i.parent!==i){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,i);break;case"constraint":e.addConstraint(o,i);break;case"composite":e.addComposite(o,i);break;case"mouseConstraint":e.addConstraint(o,i.constraint)}}return f.trigger(o,"afterAdd",{object:u}),o},e.remove=function(o,u,s){var t=[].concat(u);f.trigger(o,"beforeRemove",{object:u});for(var i=0;i<t.length;i++){var n=t[i];switch(n.type){case"body":e.removeBody(o,n,s);break;case"constraint":e.removeConstraint(o,n,s);break;case"composite":e.removeComposite(o,n,s);break;case"mouseConstraint":e.removeConstraint(o,n.constraint)}}return f.trigger(o,"afterRemove",{object:u}),o},e.addComposite=function(o,u){return o.composites.push(u),u.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,u,s){var t=l.indexOf(o.composites,u);if(-1!==t&&e.removeCompositeAt(o,t),s)for(var i=0;i<o.composites.length;i++)e.removeComposite(o.composites[i],u,!0);return o},e.removeCompositeAt=function(o,u){return o.composites.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,u){return o.bodies.push(u),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,u,s){var t=l.indexOf(o.bodies,u);if(-1!==t&&e.removeBodyAt(o,t),s)for(var i=0;i<o.composites.length;i++)e.removeBody(o.composites[i],u,!0);return o},e.removeBodyAt=function(o,u){return o.bodies.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,u){return o.constraints.push(u),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,u,s){var t=l.indexOf(o.constraints,u);if(-1!==t&&e.removeConstraintAt(o,t),s)for(var i=0;i<o.composites.length;i++)e.removeConstraint(o.composites[i],u,!0);return o},e.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,u,s){if(s)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],u,!0);return u?o.bodies=o.bodies.filter(function(i){return i.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var u=[].concat(o.bodies),s=0;s<o.composites.length;s++)u=u.concat(e.allBodies(o.composites[s]));return o.cache&&(o.cache.allBodies=u),u},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var u=[].concat(o.constraints),s=0;s<o.composites.length;s++)u=u.concat(e.allConstraints(o.composites[s]));return o.cache&&(o.cache.allConstraints=u),u},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var u=[].concat(o.composites),s=0;s<o.composites.length;s++)u=u.concat(e.allComposites(o.composites[s]));return o.cache&&(o.cache.allComposites=u),u},e.get=function(o,u,s){var t,i;switch(s){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o)}return t?0===(i=t.filter(function(n){return n.id.toString()===u.toString()})).length?null:i[0]:null},e.move=function(o,u,s){return e.remove(o,u),e.add(s,u),o},e.rebase=function(o){for(var u=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),s=0;s<u.length;s++)u[s].id=l.nextId();return o},e.translate=function(o,u,s){for(var t=s?e.allBodies(o):o.bodies,i=0;i<t.length;i++)c.translate(t[i],u);return o},e.rotate=function(o,u,s,t){for(var i=Math.cos(u),n=Math.sin(u),a=t?e.allBodies(o):o.bodies,v=0;v<a.length;v++){var C=a[v],A=C.position.x-s.x,P=C.position.y-s.y;c.setPosition(C,{x:s.x+(A*i-P*n),y:s.y+(A*n+P*i)}),c.rotate(C,u)}return o},e.scale=function(o,u,s,t,i){for(var n=i?e.allBodies(o):o.bodies,a=0;a<n.length;a++){var v=n[a];c.setPosition(v,{x:t.x+(v.position.x-t.x)*u,y:t.y+(v.position.y-t.y)*s}),c.scale(v,u,s)}return o},e.bounds=function(o){for(var u=e.allBodies(o),s=[],t=0;t<u.length;t+=1){var i=u[t];s.push(i.bounds.min,i.bounds.max)}return r.create(s)}},function(D,L,g){var e={};D.exports=e;var f=g(4),l=g(5),r=g(0);e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(c,o){for(var u=o/r._baseDelta,s=e._motionSleepThreshold,t=0;t<c.length;t++){var i=c[t],n=f.getSpeed(i),a=f.getAngularSpeed(i),v=n*n+a*a;if(0===i.force.x&&0===i.force.y){var C=Math.min(i.motion,v),A=Math.max(i.motion,v);i.motion=e._minBias*C+(1-e._minBias)*A,i.sleepThreshold>0&&i.motion<s?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold/u&&e.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}else e.set(i,!1)}},e.afterCollisions=function(c){for(var o=e._motionSleepThreshold,u=0;u<c.length;u++){var s=c[u];if(s.isActive){var t=s.collision,i=t.bodyA.parent,n=t.bodyB.parent;if(!(i.isSleeping&&n.isSleeping||i.isStatic||n.isStatic)&&(i.isSleeping||n.isSleeping)){var a=i.isSleeping&&!i.isStatic?i:n;!a.isStatic&&(a===i?n:i).motion>o&&e.set(a,!1)}}}},e.set=function(c,o){var u=c.isSleeping;o?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,u||l.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,u&&l.trigger(c,"sleepEnd"))}},function(D,L,g){var e={};D.exports=e;var r,c,o,f=g(3),l=g(9);r=[],c={overlap:0,axis:null},o={overlap:0,axis:null},e.create=function(u,s){return{pair:null,collided:!1,bodyA:u,bodyB:s,parentA:u.parent,parentB:s.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,s,t){if(e._overlapAxes(c,u.vertices,s.vertices,u.axes),c.overlap<=0||(e._overlapAxes(o,s.vertices,u.vertices,s.axes),o.overlap<=0))return null;var n,a,i=t&&t.table[l.id(u,s)];i?n=i.collision:((n=e.create(u,s)).collided=!0,n.bodyA=u.id<s.id?u:s,n.bodyB=u.id<s.id?s:u,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent);var v=n.normal,C=n.supports,A=(a=c.overlap<o.overlap?c:o).axis,P=A.x,h=A.y;P*((s=n.bodyB).position.x-(u=n.bodyA).position.x)+h*(s.position.y-u.position.y)<0?(v.x=P,v.y=h):(v.x=-P,v.y=-h),n.tangent.x=-v.y,n.tangent.y=v.x,n.depth=a.overlap,n.penetration.x=v.x*n.depth,n.penetration.y=v.y*n.depth;var d=e._findSupports(u,s,v,1),p=0;if(f.contains(u.vertices,d[0])&&(C[p++]=d[0]),f.contains(u.vertices,d[1])&&(C[p++]=d[1]),p<2){var m=e._findSupports(s,u,v,-1);f.contains(s.vertices,m[0])&&(C[p++]=m[0]),p<2&&f.contains(s.vertices,m[1])&&(C[p++]=m[1])}return 0===p&&(C[p++]=d[0]),C.length=p,n},e._overlapAxes=function(u,s,t,i){var m,x,w,y,M,S,n=s.length,a=t.length,v=s[0].x,C=s[0].y,A=t[0].x,P=t[0].y,h=i.length,d=Number.MAX_VALUE,p=0;for(M=0;M<h;M++){var I=i[M],B=I.x,E=I.y,R=v*B+C*E,T=A*B+P*E,F=R,H=T;for(S=1;S<n;S+=1)(y=s[S].x*B+s[S].y*E)>F?F=y:y<R&&(R=y);for(S=1;S<a;S+=1)(y=t[S].x*B+t[S].y*E)>H?H=y:y<T&&(T=y);if((m=(x=F-T)<(w=H-R)?x:w)<d&&(d=m,p=M,m<=0))break}u.axis=i[p],u.overlap=d},e._projectToAxis=function(u,s,t){for(var i=s[0].x*t.x+s[0].y*t.y,n=i,a=1;a<s.length;a+=1){var v=s[a].x*t.x+s[a].y*t.y;v>n?n=v:v<i&&(i=v)}u.min=i,u.max=n},e._findSupports=function(u,s,t,i){var d,p,m,x,w,n=s.vertices,a=n.length,v=u.position.x,C=u.position.y,A=t.x*i,P=t.y*i,h=Number.MAX_VALUE;for(w=0;w<a;w+=1)(x=A*(v-(p=n[w]).x)+P*(C-p.y))<h&&(h=x,d=p);return A*(v-(p=n[(d.index+1)%a]).x)+P*(C-p.y)<(h=A*(v-(m=n[(a+d.index-1)%a]).x)+P*(C-m.y))?(r[0]=d,r[1]=p,r):(r[0]=d,r[1]=m,r)}},function(D,L,g){var e={};D.exports=e;var f=g(16);e.create=function(l,r){var c=l.bodyA,o=l.bodyB,u={id:e.id(c,o),bodyA:c,bodyB:o,collision:l,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||o.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,l,r),u},e.update=function(l,r,c){var o=l.contacts,u=r.supports,s=l.activeContacts,t=r.parentA,i=r.parentB,n=t.vertices.length;l.isActive=!0,l.timeUpdated=c,l.collision=r,l.separation=r.depth,l.inverseMass=t.inverseMass+i.inverseMass,l.friction=t.friction<i.friction?t.friction:i.friction,l.frictionStatic=t.frictionStatic>i.frictionStatic?t.frictionStatic:i.frictionStatic,l.restitution=t.restitution>i.restitution?t.restitution:i.restitution,l.slop=t.slop>i.slop?t.slop:i.slop,r.pair=l,s.length=0;for(var a=0;a<u.length;a++){var v=u[a],C=v.body===t?v.index:n+v.index;s.push(o[C]||(o[C]=f.create(v)))}},e.setActive=function(l,r,c){r?(l.isActive=!0,l.timeUpdated=c):(l.isActive=!1,l.activeContacts.length=0)},e.id=function(l,r){return l.id<r.id?"A"+l.id+"B"+r.id:"A"+r.id+"B"+l.id}},function(D,L,g){var e={};D.exports=e;var f=g(3),l=g(2),r=g(7),c=g(1),o=g(11),u=g(0);e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(s){var t=s;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?l.add(t.bodyA.position,t.pointA):t.pointA,n=t.bodyB?l.add(t.bodyB.position,t.pointB):t.pointB,a=l.magnitude(l.sub(i,n));t.length=typeof t.length<"u"?t.length:a,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(v.type="pin",v.anchors=!1):t.stiffness<.9&&(v.type="spring"),t.render=u.extend(v,t.render),t},e.preSolveAll=function(s){for(var t=0;t<s.length;t+=1){var i=s[t],n=i.constraintImpulse;i.isStatic||0===n.x&&0===n.y&&0===n.angle||(i.position.x+=n.x,i.position.y+=n.y,i.angle+=n.angle)}},e.solveAll=function(s,t){for(var i=u.clamp(t/u._baseDelta,0,1),n=0;n<s.length;n+=1){var a=s[n],v=!a.bodyA||a.bodyA&&a.bodyA.isStatic,C=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(v||C)&&e.solve(s[n],i)}for(n=0;n<s.length;n+=1)C=!(a=s[n]).bodyB||a.bodyB&&a.bodyB.isStatic,!(v=!a.bodyA||a.bodyA&&a.bodyA.isStatic)&&!C&&e.solve(s[n],i)},e.solve=function(s,t){var i=s.bodyA,n=s.bodyB,a=s.pointA,v=s.pointB;if(i||n){i&&!i.isStatic&&(l.rotate(a,i.angle-s.angleA,a),s.angleA=i.angle),n&&!n.isStatic&&(l.rotate(v,n.angle-s.angleB,v),s.angleB=n.angle);var C=a,A=v;if(i&&(C=l.add(i.position,a)),n&&(A=l.add(n.position,v)),C&&A){var P=l.sub(C,A),h=l.magnitude(P);h<e._minLength&&(h=e._minLength);var I,B,E,R,T,x=s.damping*t,w=l.mult(P,(h-s.length)/h*(s.stiffness>=1||0===s.length?s.stiffness*t:s.stiffness*t*t)),y=(i?i.inverseMass:0)+(n?n.inverseMass:0),S=y+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(x>0){var F=l.create();E=l.div(P,h),T=l.sub(n&&l.sub(n.position,n.positionPrev)||F,i&&l.sub(i.position,i.positionPrev)||F),R=l.dot(E,T)}i&&!i.isStatic&&(i.constraintImpulse.x-=w.x*(B=i.inverseMass/y),i.constraintImpulse.y-=w.y*B,i.position.x-=w.x*B,i.position.y-=w.y*B,x>0&&(i.positionPrev.x-=x*E.x*R*B,i.positionPrev.y-=x*E.y*R*B),I=l.cross(a,w)/S*e._torqueDampen*i.inverseInertia*(1-s.angularStiffness),i.constraintImpulse.angle-=I,i.angle-=I),n&&!n.isStatic&&(n.constraintImpulse.x+=w.x*(B=n.inverseMass/y),n.constraintImpulse.y+=w.y*B,n.position.x+=w.x*B,n.position.y+=w.y*B,x>0&&(n.positionPrev.x+=x*E.x*R*B,n.positionPrev.y+=x*E.y*R*B),I=l.cross(v,w)/S*e._torqueDampen*n.inverseInertia*(1-s.angularStiffness),n.constraintImpulse.angle+=I,n.angle+=I)}}},e.postSolveAll=function(s){for(var t=0;t<s.length;t++){var i=s[t],n=i.constraintImpulse;if(!(i.isStatic||0===n.x&&0===n.y&&0===n.angle)){r.set(i,!1);for(var a=0;a<i.parts.length;a++){var v=i.parts[a];f.translate(v.vertices,n),a>0&&(v.position.x+=n.x,v.position.y+=n.y),0!==n.angle&&(f.rotate(v.vertices,n.angle,i.position),o.rotate(v.axes,n.angle),a>0&&l.rotateAbout(v.position,n.angle,i.position,v.position)),c.update(v.bounds,v.vertices,i.velocity)}n.angle*=e._warming,n.x*=e._warming,n.y*=e._warming}}},e.pointAWorld=function(s){return{x:(s.bodyA?s.bodyA.position.x:0)+(s.pointA?s.pointA.x:0),y:(s.bodyA?s.bodyA.position.y:0)+(s.pointA?s.pointA.y:0)}},e.pointBWorld=function(s){return{x:(s.bodyB?s.bodyB.position.x:0)+(s.pointB?s.pointB.x:0),y:(s.bodyB?s.bodyB.position.y:0)+(s.pointB?s.pointB.y:0)}}},function(D,L,g){var e={};D.exports=e;var f=g(2),l=g(0);e.fromVertices=function(r){for(var c={},o=0;o<r.length;o++){var u=(o+1)%r.length,s=f.normalise({x:r[u].y-r[o].y,y:r[o].x-r[u].x}),t=0===s.y?1/0:s.x/s.y;c[t=t.toFixed(3).toString()]=s}return l.values(c)},e.rotate=function(r,c){if(0!==c)for(var o=Math.cos(c),u=Math.sin(c),s=0;s<r.length;s++){var i,t=r[s];i=t.x*o-t.y*u,t.y=t.x*u+t.y*o,t.x=i}}},function(D,L,g){var e={};D.exports=e;var f=g(3),l=g(0),r=g(4),c=g(1),o=g(2);e.rectangle=function(u,s,t,i,n){n=n||{};var a={label:"Rectangle Body",position:{x:u,y:s},vertices:f.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(n.chamfer){var v=n.chamfer;a.vertices=f.chamfer(a.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete n.chamfer}return r.create(l.extend({},a,n))},e.trapezoid=function(u,s,t,i,n,a){a=a||{};var C=t*(n*=.5),A=C+(1-2*n)*t,P=A+C,d={label:"Trapezoid Body",position:{x:u,y:s},vertices:f.fromPath(n<.5?"L 0 0 L "+C+" "+-i+" L "+A+" "+-i+" L "+P+" 0":"L 0 0 L "+A+" "+-i+" L "+P+" 0")};if(a.chamfer){var p=a.chamfer;d.vertices=f.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete a.chamfer}return r.create(l.extend({},d,a))},e.circle=function(u,s,t,i,n){i=i||{};var a={label:"Circle Body",circleRadius:t};n=n||25;var v=Math.ceil(Math.max(10,Math.min(n,t)));return v%2==1&&(v+=1),e.polygon(u,s,v,t,l.extend({},a,i))},e.polygon=function(u,s,t,i,n){if(n=n||{},t<3)return e.circle(u,s,i,n);for(var a=2*Math.PI/t,v="",C=.5*a,A=0;A<t;A+=1){var P=C+A*a,h=Math.cos(P)*i,d=Math.sin(P)*i;v+="L "+h.toFixed(3)+" "+d.toFixed(3)+" "}var p={label:"Polygon Body",position:{x:u,y:s},vertices:f.fromPath(v)};if(n.chamfer){var m=n.chamfer;p.vertices=f.chamfer(p.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete n.chamfer}return r.create(l.extend({},p,n))},e.fromVertices=function(u,s,t,i,n,a,v,C){var P,h,d,p,x,w,y,M,S,I,A=l.getDecomp();for(P=!(!A||!A.quickDecomp),i=i||{},d=[],n=typeof n<"u"&&n,a=typeof a<"u"?a:.01,v=typeof v<"u"?v:10,C=typeof C<"u"?C:.01,l.isArray(t[0])||(t=[t]),S=0;S<t.length;S+=1)if(!(p=f.isConvex(x=t[S]))&&!P&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),p||!P)x=p?f.clockwiseSort(x):f.hull(x),d.push({position:{x:u,y:s},vertices:x});else{var B=x.map(function(W){return[W.x,W.y]});A.makeCCW(B),!1!==a&&A.removeCollinearPoints(B,a),!1!==C&&A.removeDuplicatePoints&&A.removeDuplicatePoints(B,C);var E=A.quickDecomp(B);for(w=0;w<E.length;w++){var T=E[w].map(function(W){return{x:W[0],y:W[1]}});v>0&&f.area(T)<v||d.push({position:f.centre(T),vertices:T})}}for(w=0;w<d.length;w++)d[w]=r.create(l.extend(d[w],i));if(n){for(w=0;w<d.length;w++){var H=d[w];for(y=w+1;y<d.length;y++){var O=d[y];if(c.overlaps(H.bounds,O.bounds)){var k=H.vertices,V=O.vertices;for(M=0;M<H.vertices.length;M++)for(I=0;I<O.vertices.length;I++){var b=o.magnitudeSquared(o.sub(k[(M+1)%k.length],V[I])),N=o.magnitudeSquared(o.sub(k[M],V[(I+1)%V.length]));b<5&&N<5&&(k[M].isInternal=!0,V[I].isInternal=!0)}}}}}return d.length>1?(h=r.create(l.extend({parts:d.slice(0)},i)),r.setPosition(h,{x:u,y:s}),h):d[0]}},function(D,L,g){var e={};D.exports=e;var f=g(0),l=g(8);e.create=function(r){return f.extend({bodies:[],pairs:null},r)},e.setBodies=function(r,c){r.bodies=c.slice(0)},e.clear=function(r){r.bodies=[]},e.collisions=function(r){var n,a,c=[],o=r.pairs,u=r.bodies,s=u.length,t=e.canCollide,i=l.collides;for(u.sort(e._compareBoundsX),n=0;n<s;n++){var v=u[n],C=v.bounds,A=v.bounds.max.x,P=v.bounds.max.y,h=v.bounds.min.y,d=v.isStatic||v.isSleeping,p=v.parts.length,m=1===p;for(a=n+1;a<s;a++){var x=u[a];if((w=x.bounds).min.x>A)break;if(!(P<w.min.y||h>w.max.y)&&(!d||!x.isStatic&&!x.isSleeping)&&t(v.collisionFilter,x.collisionFilter)){var y=x.parts.length;if(m&&1===y)(M=i(v,x,o))&&c.push(M);else for(var I=y>1?1:0,B=p>1?1:0;B<p;B++)for(var E=v.parts[B],R=(C=E.bounds,I);R<y;R++){var w,M,T=x.parts[R];C.min.x>(w=T.bounds).max.x||C.max.x<w.min.x||C.max.y<w.min.y||C.min.y>w.max.y||(M=i(E,T,o))&&c.push(M)}}}}return c},e.canCollide=function(r,c){return r.group===c.group&&0!==r.group?r.group>0:0!=(r.mask&c.category)&&0!=(c.mask&r.category)},e._compareBoundsX=function(r,c){return r.bounds.min.x-c.bounds.min.x}},function(D,L,g){var e={};D.exports=e;var f=g(0);e.create=function(l){var r={};return l||f.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=l||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(c){var o=e._getRelativeMousePosition(c,r.element,r.pixelRatio);c.changedTouches&&(r.button=0,c.preventDefault()),r.absolute.x=o.x,r.absolute.y=o.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=c},r.mousedown=function(c){var o=e._getRelativeMousePosition(c,r.element,r.pixelRatio);c.changedTouches?(r.button=0,c.preventDefault()):r.button=c.button,r.absolute.x=o.x,r.absolute.y=o.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=c},r.mouseup=function(c){var o=e._getRelativeMousePosition(c,r.element,r.pixelRatio);c.changedTouches&&c.preventDefault(),r.button=-1,r.absolute.x=o.x,r.absolute.y=o.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=c},r.mousewheel=function(c){r.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(r,r.element),r},e.setElement=function(l,r){l.element=r,r.addEventListener("mousemove",l.mousemove),r.addEventListener("mousedown",l.mousedown),r.addEventListener("mouseup",l.mouseup),r.addEventListener("mousewheel",l.mousewheel),r.addEventListener("DOMMouseScroll",l.mousewheel),r.addEventListener("touchmove",l.mousemove),r.addEventListener("touchstart",l.mousedown),r.addEventListener("touchend",l.mouseup)},e.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},e.setOffset=function(l,r){l.offset.x=r.x,l.offset.y=r.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},e.setScale=function(l,r){l.scale.x=r.x,l.scale.y=r.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},e._getRelativeMousePosition=function(l,r,c){var n,a,o=r.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:u.scrollLeft,t=void 0!==window.pageYOffset?window.pageYOffset:u.scrollTop,i=l.changedTouches;return i?(n=i[0].pageX-o.left-s,a=i[0].pageY-o.top-t):(n=l.pageX-o.left-s,a=l.pageY-o.top-t),{x:n/(r.clientWidth/(r.width||r.clientWidth)*c),y:a/(r.clientHeight/(r.height||r.clientHeight)*c)}}},function(D,L,g){var e={};D.exports=e;var f=g(0);e._registry={},e.register=function(l){if(e.isPlugin(l)||f.warn("Plugin.register:",e.toString(l),"does not implement all required fields."),l.name in e._registry){var r=e._registry[l.name],c=e.versionParse(l.version).number,o=e.versionParse(r.version).number;c>o?(f.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(l)),e._registry[l.name]=l):c<o?f.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(l)):l!==r&&f.warn("Plugin.register:",e.toString(l),"is already registered to different plugin object")}else e._registry[l.name]=l;return l},e.resolve=function(l){return e._registry[e.dependencyParse(l).name]},e.toString=function(l){return"string"==typeof l?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},e.isPlugin=function(l){return l&&l.name&&l.version&&l.install},e.isUsed=function(l,r){return l.used.indexOf(r)>-1},e.isFor=function(l,r){var c=l.for&&e.dependencyParse(l.for);return!l.for||r.name===c.name&&e.versionSatisfies(r.version,c.range)},e.use=function(l,r){if(l.uses=(l.uses||[]).concat(r||[]),0!==l.uses.length){for(var c=e.dependencies(l),o=f.topologicalSort(c),u=[],s=0;s<o.length;s+=1)if(o[s]!==l.name){var t=e.resolve(o[s]);if(!t){u.push("\u274c "+o[s]);continue}e.isUsed(l,t.name)||(e.isFor(t,l)||(f.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(l)+"."),t._warned=!0),t.install?t.install(l):(f.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1f536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),l.used.push(t.name))}u.length>0&&f.info(u.join("  "))}else f.warn("Plugin.use:",e.toString(l),"does not specify any dependencies to install.")},e.dependencies=function(l,r){var c=e.dependencyParse(l),o=c.name;if(!(o in(r=r||{}))){l=e.resolve(l)||l,r[o]=f.map(l.uses||[],function(s){e.isPlugin(s)&&e.register(s);var t=e.dependencyParse(s),i=e.resolve(s);return i&&!e.versionSatisfies(i.version,t.range)?(f.warn("Plugin.dependencies:",e.toString(i),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),i._warned=!0,l._warned=!0):i||(f.warn("Plugin.dependencies:",e.toString(s),"used by",e.toString(c),"could not be resolved."),l._warned=!0),t.name});for(var u=0;u<r[o].length;u+=1)e.dependencies(r[o][u],r);return r}},e.dependencyParse=function(l){return f.isString(l)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(l)||f.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}):{name:l.name,range:l.range||l.version}},e.versionParse=function(l){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(l)||f.warn("Plugin.versionParse:",l,"is not a valid version or range.");var c=r.exec(l),o=Number(c[4]),u=Number(c[5]),s=Number(c[6]);return{isRange:!(!c[1]&&!c[2]),version:c[3],range:l,operator:c[1]||c[2]||"",major:o,minor:u,patch:s,parts:[o,u,s],prerelease:c[7],number:1e8*o+1e4*u+s}},e.versionSatisfies=function(l,r){var c=e.versionParse(r=r||"*"),o=e.versionParse(l);if(c.isRange){if("*"===c.operator||"*"===l)return!0;if(">"===c.operator)return o.number>c.number;if(">="===c.operator)return o.number>=c.number;if("~"===c.operator)return o.major===c.major&&o.minor===c.minor&&o.patch>=c.patch;if("^"===c.operator)return c.major>0?o.major===c.major&&o.number>=c.number:c.minor>0?o.minor===c.minor&&o.patch>=c.patch:o.patch===c.patch}return l===r||"*"===l}},function(D,L){var g={};D.exports=g,g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},function(D,L,g){var e={};D.exports=e;var f=g(7),l=g(18),r=g(13),c=g(19),o=g(5),u=g(6),s=g(10),t=g(0),i=g(4);e.create=function(n){var v=t.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},n=n||{});return v.world=n.world||u.create({label:"World"}),v.pairs=n.pairs||c.create(),v.detector=n.detector||r.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},e.update=function(n,a){var p,v=t.now(),C=n.world,A=n.detector,P=n.pairs,h=n.timing,d=h.timestamp;a=typeof a<"u"?a:t._baseDelta,h.timestamp+=a*=h.timeScale,h.lastDelta=a;var m={timestamp:h.timestamp,delta:a};o.trigger(n,"beforeUpdate",m);var x=u.allBodies(C),w=u.allConstraints(C);for(C.isModified&&(r.setBodies(A,x),u.setModified(C,!1,!1,!0)),n.enableSleeping&&f.update(x,a),e._bodiesApplyGravity(x,n.gravity),a>0&&e._bodiesUpdate(x,a),s.preSolveAll(x),p=0;p<n.constraintIterations;p++)s.solveAll(w,a);s.postSolveAll(x),A.pairs=n.pairs;var y=r.collisions(A);c.update(P,y,d),n.enableSleeping&&f.afterCollisions(P.list),P.collisionStart.length>0&&o.trigger(n,"collisionStart",{pairs:P.collisionStart});var M=t.clamp(20/n.positionIterations,0,1);for(l.preSolvePosition(P.list),p=0;p<n.positionIterations;p++)l.solvePosition(P.list,a,M);for(l.postSolvePosition(x),s.preSolveAll(x),p=0;p<n.constraintIterations;p++)s.solveAll(w,a);for(s.postSolveAll(x),l.preSolveVelocity(P.list),p=0;p<n.velocityIterations;p++)l.solveVelocity(P.list,a);return e._bodiesUpdateVelocities(x),P.collisionActive.length>0&&o.trigger(n,"collisionActive",{pairs:P.collisionActive}),P.collisionEnd.length>0&&o.trigger(n,"collisionEnd",{pairs:P.collisionEnd}),e._bodiesClearForces(x),o.trigger(n,"afterUpdate",m),n.timing.lastElapsed=t.now()-v,n},e.merge=function(n,a){if(t.extend(n,a),a.world){n.world=a.world,e.clear(n);for(var v=u.allBodies(n.world),C=0;C<v.length;C++){var A=v[C];f.set(A,!1),A.id=t.nextId()}}},e.clear=function(n){c.clear(n.pairs),r.clear(n.detector)},e._bodiesClearForces=function(n){for(var a=n.length,v=0;v<a;v++){var C=n[v];C.force.x=0,C.force.y=0,C.torque=0}},e._bodiesApplyGravity=function(n,a){var v=typeof a.scale<"u"?a.scale:.001,C=n.length;if((0!==a.x||0!==a.y)&&0!==v)for(var A=0;A<C;A++){var P=n[A];P.isStatic||P.isSleeping||(P.force.y+=P.mass*a.y*v,P.force.x+=P.mass*a.x*v)}},e._bodiesUpdate=function(n,a){for(var v=n.length,C=0;C<v;C++){var A=n[C];A.isStatic||A.isSleeping||i.update(A,a)}},e._bodiesUpdateVelocities=function(n){for(var a=n.length,v=0;v<a;v++)i.updateVelocities(n[v])}},function(D,L,g){var e={};D.exports=e;var f=g(3),l=g(0),r=g(1);e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(c){var o,u,s,t=c.length;for(o=0;o<t;o++)(u=c[o]).isActive&&(u.collision.parentA.totalContacts+=s=u.activeContacts.length,u.collision.parentB.totalContacts+=s)},e.solvePosition=function(c,o,u){var s,t,i,n,a,v,C,A,P=e._positionDampen*(u||1),h=l.clamp(o/l._baseDelta,0,1),d=c.length;for(s=0;s<d;s++)(t=c[s]).isActive&&!t.isSensor&&(t.separation=(v=(i=t.collision).normal).x*((a=i.parentB).positionImpulse.x+i.penetration.x-(n=i.parentA).positionImpulse.x)+v.y*(a.positionImpulse.y+i.penetration.y-n.positionImpulse.y));for(s=0;s<d;s++)(t=c[s]).isActive&&!t.isSensor&&(a=(i=t.collision).parentB,v=i.normal,A=t.separation-t.slop*h,((n=i.parentA).isStatic||a.isStatic)&&(A*=2),n.isStatic||n.isSleeping||(n.positionImpulse.x+=v.x*A*(C=P/n.totalContacts),n.positionImpulse.y+=v.y*A*C),a.isStatic||a.isSleeping||(a.positionImpulse.x-=v.x*A*(C=P/a.totalContacts),a.positionImpulse.y-=v.y*A*C))},e.postSolvePosition=function(c){for(var o=e._positionWarming,u=c.length,s=f.translate,t=r.update,i=0;i<u;i++){var n=c[i],a=n.positionImpulse,v=a.x,C=a.y,A=n.velocity;if(n.totalContacts=0,0!==v||0!==C){for(var P=0;P<n.parts.length;P++){var h=n.parts[P];s(h.vertices,a),t(h.bounds,h.vertices,A),h.position.x+=v,h.position.y+=C}n.positionPrev.x+=v,n.positionPrev.y+=C,v*A.x+C*A.y<0?(a.x=0,a.y=0):(a.x*=o,a.y*=o)}}},e.preSolveVelocity=function(c){var u,s,o=c.length;for(u=0;u<o;u++){var t=c[u];if(t.isActive&&!t.isSensor){var i=t.activeContacts,n=i.length,a=t.collision,v=a.parentA,C=a.parentB,A=a.normal,P=a.tangent;for(s=0;s<n;s++){var h=i[s],d=h.vertex,p=h.normalImpulse,m=h.tangentImpulse;if(0!==p||0!==m){var x=A.x*p+P.x*m,w=A.y*p+P.y*m;v.isStatic||v.isSleeping||(v.positionPrev.x+=x*v.inverseMass,v.positionPrev.y+=w*v.inverseMass,v.anglePrev+=v.inverseInertia*((d.x-v.position.x)*w-(d.y-v.position.y)*x)),C.isStatic||C.isSleeping||(C.positionPrev.x-=x*C.inverseMass,C.positionPrev.y-=w*C.inverseMass,C.anglePrev-=C.inverseInertia*((d.x-C.position.x)*w-(d.y-C.position.y)*x))}}}}},e.solveVelocity=function(c,o){var A,P,h,d,u=o/l._baseDelta,t=u*u*u,i=-e._restingThresh*u,n=e._restingThreshTangent,a=e._frictionNormalMultiplier*u,v=e._frictionMaxStatic,C=c.length;for(h=0;h<C;h++){var p=c[h];if(p.isActive&&!p.isSensor){var m=p.collision,x=m.parentA,w=m.parentB,y=x.velocity,M=w.velocity,S=m.normal.x,I=m.normal.y,B=m.tangent.x,E=m.tangent.y,R=p.activeContacts,T=R.length,F=1/T,H=x.inverseMass+w.inverseMass,O=p.friction*p.frictionStatic*a;for(y.x=x.position.x-x.positionPrev.x,y.y=x.position.y-x.positionPrev.y,M.x=w.position.x-w.positionPrev.x,M.y=w.position.y-w.positionPrev.y,x.angularVelocity=x.angle-x.anglePrev,w.angularVelocity=w.angle-w.anglePrev,d=0;d<T;d++){var k=R[d],V=k.vertex,b=V.x-x.position.x,N=V.y-x.position.y,W=V.x-w.position.x,U=V.y-w.position.y,J=y.x-N*x.angularVelocity-(M.x-U*w.angularVelocity),j=y.y+b*x.angularVelocity-(M.y+W*w.angularVelocity),K=S*J+I*j,X=B*J+E*j,q=p.separation+K,Z=Math.min(q,1),_=(Z=q<0?0:Z)*O;X<-_||X>_?(A=p.friction*(X>0?1:-1)*t)<-(P=X>0?X:-X)?A=-P:A>P&&(A=P):(A=X,P=v);var ee=b*I-N*S,te=W*I-U*S,ie=F/(H+x.inverseInertia*ee*ee+w.inverseInertia*te*te),z=(1+p.restitution)*K*ie;if(A*=ie,K<i)k.normalImpulse=0;else{var ae=k.normalImpulse;k.normalImpulse+=z,k.normalImpulse>0&&(k.normalImpulse=0),z=k.normalImpulse-ae}if(X<-n||X>n)k.tangentImpulse=0;else{var oe=k.tangentImpulse;k.tangentImpulse+=A,k.tangentImpulse<-P&&(k.tangentImpulse=-P),k.tangentImpulse>P&&(k.tangentImpulse=P),A=k.tangentImpulse-oe}var Y=S*z+B*A,Q=I*z+E*A;x.isStatic||x.isSleeping||(x.positionPrev.x+=Y*x.inverseMass,x.positionPrev.y+=Q*x.inverseMass,x.anglePrev+=(b*Q-N*Y)*x.inverseInertia),w.isStatic||w.isSleeping||(w.positionPrev.x-=Y*w.inverseMass,w.positionPrev.y-=Q*w.inverseMass,w.anglePrev-=(W*Q-U*Y)*w.inverseInertia)}}}}},function(D,L,g){var e={};D.exports=e;var f=g(9),l=g(0);e.create=function(r){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,c,o){var C,A,P,h,u=r.list,s=u.length,t=r.table,i=c.length,n=r.collisionStart,a=r.collisionEnd,v=r.collisionActive;for(n.length=0,a.length=0,v.length=0,h=0;h<s;h++)u[h].confirmedActive=!1;for(h=0;h<i;h++)(P=(C=c[h]).pair)?(P.isActive?v.push(P):n.push(P),f.update(P,C,o),P.confirmedActive=!0):(t[(P=f.create(C,o)).id]=P,n.push(P),u.push(P));var d=[];for(s=u.length,h=0;h<s;h++)(P=u[h]).confirmedActive||(f.setActive(P,!1,o),a.push(P),!P.collision.bodyA.isSleeping&&!P.collision.bodyB.isSleeping&&d.push(h));for(h=0;h<d.length;h++)P=u[A=d[h]-h],u.splice(A,1),delete t[P.id]},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}},function(D,L,g){var e=D.exports=g(21);e.Axes=g(11),e.Bodies=g(12),e.Body=g(4),e.Bounds=g(1),e.Collision=g(8),e.Common=g(0),e.Composite=g(6),e.Composites=g(22),e.Constraint=g(10),e.Contact=g(16),e.Detector=g(13),e.Engine=g(17),e.Events=g(5),e.Grid=g(23),e.Mouse=g(14),e.MouseConstraint=g(24),e.Pair=g(9),e.Pairs=g(19),e.Plugin=g(15),e.Query=g(25),e.Render=g(26),e.Resolver=g(18),e.Runner=g(27),e.SAT=g(28),e.Sleeping=g(7),e.Svg=g(29),e.Vector=g(2),e.Vertices=g(3),e.World=g(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27a4 use Matter.Runner.run(engine) instead")},function(D,L,g){var e={};D.exports=e;var f=g(15),l=g(0);e.name="matter-js",e.version="0.19.0",e.uses=[],e.used=[],e.use=function(){f.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,c){return r=r.replace(/^Matter./,""),l.chainPathBefore(e,r,c)},e.after=function(r,c){return r=r.replace(/^Matter./,""),l.chainPathAfter(e,r,c)}},function(D,L,g){var e={};D.exports=e;var f=g(6),l=g(10),r=g(0),c=g(4),o=g(12),u=r.deprecated;e.stack=function(s,t,i,n,a,v,C){for(var d,A=f.create({label:"Stack"}),P=s,h=t,p=0,m=0;m<n;m++){for(var x=0,w=0;w<i;w++){var y=C(P,h,w,m,d,p);if(y){var M=y.bounds.max.y-y.bounds.min.y;M>x&&(x=M),c.translate(y,{x:.5*(y.bounds.max.x-y.bounds.min.x),y:.5*M}),P=y.bounds.max.x+a,f.addBody(A,y),d=y,p+=1}else P+=a}h+=x+v,P=s}return A},e.chain=function(s,t,i,n,a,v){for(var C=s.bodies,A=1;A<C.length;A++){var P=C[A-1],h=C[A],y=r.extend({bodyA:P,pointA:{x:(P.bounds.max.x-P.bounds.min.x)*t,y:(P.bounds.max.y-P.bounds.min.y)*i},bodyB:h,pointB:{x:(h.bounds.max.x-h.bounds.min.x)*n,y:(h.bounds.max.y-h.bounds.min.y)*a}},v);f.addConstraint(s,l.create(y))}return s.label+=" Chain",s},e.mesh=function(s,t,i,n,a){var C,A,h,v=s.bodies;for(C=0;C<i;C++){for(A=1;A<t;A++)f.addConstraint(s,l.create(r.extend({bodyA:v[A-1+C*t],bodyB:h=v[A+C*t]},a)));if(C>0)for(A=0;A<t;A++)f.addConstraint(s,l.create(r.extend({bodyA:v[A+(C-1)*t],bodyB:h=v[A+C*t]},a))),n&&A>0&&f.addConstraint(s,l.create(r.extend({bodyA:v[A-1+(C-1)*t],bodyB:h},a))),n&&A<t-1&&f.addConstraint(s,l.create(r.extend({bodyA:v[A+1+(C-1)*t],bodyB:h},a)))}return s.label+=" Mesh",s},e.pyramid=function(s,t,i,n,a,v,C){return e.stack(s,t,i,n,a,v,function(A,P,h,d,p,m){var x=Math.min(n,Math.ceil(i/2)),w=p?p.bounds.max.x-p.bounds.min.x:0;if(!(d>x||h<(d=x-d)||h>i-1-d))return 1===m&&c.translate(p,{x:(h+(i%2==1?1:-1))*w,y:0}),C(s+(p?h*w:0)+h*a,P,h,d,p,m)})},e.newtonsCradle=function(s,t,i,n,a){for(var v=f.create({label:"Newtons Cradle"}),C=0;C<i;C++){var P=o.circle(s+C*(1.9*n),t+a,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=l.create({pointA:{x:s+C*(1.9*n),y:t},bodyB:P});f.addBody(v,P),f.addConstraint(v,h)}return v},u(e,"newtonsCradle","Composites.newtonsCradle \u27a4 moved to newtonsCradle example"),e.car=function(s,t,i,n,a){var v=c.nextGroup(!0),A=.5*-i+20,P=.5*i-20,d=f.create({label:"Car"}),p=o.rectangle(s,t,i,n,{collisionFilter:{group:v},chamfer:{radius:.5*n},density:2e-4}),m=o.circle(s+A,t+0,a,{collisionFilter:{group:v},friction:.8}),x=o.circle(s+P,t+0,a,{collisionFilter:{group:v},friction:.8}),w=l.create({bodyB:p,pointB:{x:A,y:0},bodyA:m,stiffness:1,length:0}),y=l.create({bodyB:p,pointB:{x:P,y:0},bodyA:x,stiffness:1,length:0});return f.addBody(d,p),f.addBody(d,m),f.addBody(d,x),f.addConstraint(d,w),f.addConstraint(d,y),d},u(e,"car","Composites.car \u27a4 moved to car example"),e.softBody=function(s,t,i,n,a,v,C,A,P,h){P=r.extend({inertia:1/0},P),h=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},h);var d=e.stack(s,t,i,n,a,v,function(p,m){return o.circle(p,m,A,P)});return e.mesh(d,i,n,C,h),d.label="Soft Body",d},u(e,"softBody","Composites.softBody \u27a4 moved to softBody and cloth examples")},function(D,L,g){var e={};D.exports=e;var f=g(9),l=g(0),r=l.deprecated;e.create=function(c){return l.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},c)},e.update=function(c,o,u,s){var t,i,n,C,A,a=u.world,v=c.buckets,P=!1;for(t=0;t<o.length;t++){var h=o[t];if((!h.isSleeping||s)&&(!a.bounds||!(h.bounds.max.x<a.bounds.min.x||h.bounds.min.x>a.bounds.max.x||h.bounds.max.y<a.bounds.min.y||h.bounds.min.y>a.bounds.max.y))){var d=e._getRegion(c,h);if(!h.region||d.id!==h.region.id||s){(!h.region||s)&&(h.region=d);var p=e._regionUnion(d,h.region);for(i=p.startCol;i<=p.endCol;i++)for(n=p.startRow;n<=p.endRow;n++){C=v[A=e._getBucketId(i,n)];var m=i>=d.startCol&&i<=d.endCol&&n>=d.startRow&&n<=d.endRow,x=i>=h.region.startCol&&i<=h.region.endCol&&n>=h.region.startRow&&n<=h.region.endRow;!m&&x&&x&&C&&e._bucketRemoveBody(c,C,h),(h.region===d||m&&!x||s)&&(C||(C=e._createBucket(v,A)),e._bucketAddBody(c,C,h))}h.region=d,P=!0}}}P&&(c.pairsList=e._createActivePairsList(c))},r(e,"update","Grid.update \u27a4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},r(e,"clear","Grid.clear \u27a4 replaced by Matter.Detector"),e._regionUnion=function(c,o){var u=Math.min(c.startCol,o.startCol),s=Math.max(c.endCol,o.endCol),t=Math.min(c.startRow,o.startRow),i=Math.max(c.endRow,o.endRow);return e._createRegion(u,s,t,i)},e._getRegion=function(c,o){var u=o.bounds,s=Math.floor(u.min.x/c.bucketWidth),t=Math.floor(u.max.x/c.bucketWidth),i=Math.floor(u.min.y/c.bucketHeight),n=Math.floor(u.max.y/c.bucketHeight);return e._createRegion(s,t,i,n)},e._createRegion=function(c,o,u,s){return{id:c+","+o+","+u+","+s,startCol:c,endCol:o,startRow:u,endRow:s}},e._getBucketId=function(c,o){return"C"+c+"R"+o},e._createBucket=function(c,o){return c[o]=[]},e._bucketAddBody=function(c,o,u){var n,s=c.pairs,t=f.id,i=o.length;for(n=0;n<i;n++){var a=o[n];if(!(u.id===a.id||u.isStatic&&a.isStatic)){var v=t(u,a),C=s[v];C?C[2]+=1:s[v]=[u,a,1]}}o.push(u)},e._bucketRemoveBody=function(c,o,u){var i,s=c.pairs,t=f.id;o.splice(l.indexOf(o,u),1);var n=o.length;for(i=0;i<n;i++){var a=s[t(u,o[i])];a&&(a[2]-=1)}},e._createActivePairsList=function(c){var o,n,u=c.pairs,s=l.keys(u),t=s.length,i=[];for(n=0;n<t;n++)(o=u[s[n]])[2]>0?i.push(o):delete u[s[n]];return i}},function(D,L,g){var e={};D.exports=e;var f=g(3),l=g(7),r=g(14),c=g(5),o=g(13),u=g(10),s=g(6),t=g(0),i=g(1);e.create=function(n,a){var v=(n?n.mouse:null)||(a?a.mouse:null);v||(n&&n.render&&n.render.canvas?v=r.create(n.render.canvas):a&&a.element?v=r.create(a.element):(v=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=u.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),P=t.extend({type:"mouseConstraint",mouse:v,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},a);return c.on(n,"beforeUpdate",function(){var h=s.allBodies(n.world);e.update(P,h),e._triggerEvents(P)}),P},e.update=function(n,a){var v=n.mouse,C=n.constraint,A=n.body;if(0===v.button){if(C.bodyB)l.set(C.bodyB,!1),C.pointA=v.position;else for(var P=0;P<a.length;P++)if(i.contains((A=a[P]).bounds,v.position)&&o.canCollide(A.collisionFilter,n.collisionFilter))for(var h=A.parts.length>1?1:0;h<A.parts.length;h++)if(f.contains(A.parts[h].vertices,v.position)){C.pointA=v.position,C.bodyB=n.body=A,C.pointB={x:v.position.x-A.position.x,y:v.position.y-A.position.y},C.angleB=A.angle,l.set(A,!1),c.trigger(n,"startdrag",{mouse:v,body:A});break}}else C.bodyB=n.body=null,C.pointB=null,A&&c.trigger(n,"enddrag",{mouse:v,body:A})},e._triggerEvents=function(n){var a=n.mouse,v=a.sourceEvents;v.mousemove&&c.trigger(n,"mousemove",{mouse:a}),v.mousedown&&c.trigger(n,"mousedown",{mouse:a}),v.mouseup&&c.trigger(n,"mouseup",{mouse:a}),r.clearSourceEvents(a)}},function(D,L,g){var e={};D.exports=e;var f=g(2),l=g(8),r=g(1),c=g(12),o=g(3);e.collides=function(u,s){for(var t=[],i=s.length,n=u.bounds,a=l.collides,v=r.overlaps,C=0;C<i;C++){var A=s[C],P=A.parts.length,h=1===P?0:1;if(v(A.bounds,n))for(var d=h;d<P;d++){var p=A.parts[d];if(v(p.bounds,n)){var m=a(p,u);if(m){t.push(m);break}}}}return t},e.ray=function(u,s,t,i){i=i||1e-100;for(var n=f.angle(s,t),a=f.magnitude(f.sub(s,t)),A=c.rectangle(.5*(t.x+s.x),.5*(t.y+s.y),a,i,{angle:n}),P=e.collides(A,u),h=0;h<P.length;h+=1){var d=P[h];d.body=d.bodyB=d.bodyA}return P},e.region=function(u,s,t){for(var i=[],n=0;n<u.length;n++){var a=u[n],v=r.overlaps(a.bounds,s);(v&&!t||!v&&t)&&i.push(a)}return i},e.point=function(u,s){for(var t=[],i=0;i<u.length;i++){var n=u[i];if(r.contains(n.bounds,s))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var v=n.parts[a];if(r.contains(v.bounds,s)&&o.contains(v.vertices,s)){t.push(n);break}}}return t}},function(D,L,g){var e={};D.exports=e;var f=g(4),l=g(0),r=g(6),c=g(1),o=g(5),u=g(2),s=g(14);!function(){var t,i;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(l.now())},1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var p=l.extend({engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},h);return p.canvas&&(p.canvas.width=p.options.width||p.canvas.width,p.canvas.height=p.options.height||p.canvas.height),p.mouse=h.mouse,p.engine=h.engine,p.canvas=p.canvas||v(p.options.width,p.options.height),p.context=p.canvas.getContext("2d"),p.textures={},p.bounds=p.bounds||{min:{x:0,y:0},max:{x:p.canvas.width,y:p.canvas.height}},p.controller=e,p.options.showBroadphase=!1,1!==p.options.pixelRatio&&e.setPixelRatio(p,p.options.pixelRatio),l.isElement(p.element)&&p.element.appendChild(p.canvas),p},e.run=function(h){!function d(p){h.frameRequestId=t(d),n(h,p),e.world(h,p),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,p),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,p)}()},e.stop=function(h){i(h.frameRequestId)},e.setPixelRatio=function(h,d){var p=h.options,m=h.canvas;"auto"===d&&(d=C(m)),p.pixelRatio=d,m.setAttribute("data-pixel-ratio",d),m.width=p.width*d,m.height=p.height*d,m.style.width=p.width+"px",m.style.height=p.height+"px"},e.lookAt=function(h,d,p,m){m=!(typeof m<"u")||m,d=l.isArray(d)?d:[d],p=p||{x:0,y:0};for(var x={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<d.length;w+=1){var y=d[w],M=y.bounds?y.bounds.min:y.min||y.position||y,S=y.bounds?y.bounds.max:y.max||y.position||y;M&&S&&(M.x<x.min.x&&(x.min.x=M.x),S.x>x.max.x&&(x.max.x=S.x),M.y<x.min.y&&(x.min.y=M.y),S.y>x.max.y&&(x.max.y=S.y))}var I=x.max.x-x.min.x+2*p.x,B=x.max.y-x.min.y+2*p.y,T=h.canvas.width/h.canvas.height,F=I/B,H=1,O=1;F>T?O=F/T:H=T/F,h.options.hasBounds=!0,h.bounds.min.x=x.min.x,h.bounds.max.x=x.min.x+I*H,h.bounds.min.y=x.min.y,h.bounds.max.y=x.min.y+B*O,m&&(h.bounds.min.x+=.5*I-I*H*.5,h.bounds.max.x+=.5*I-I*H*.5,h.bounds.min.y+=.5*B-B*O*.5,h.bounds.max.y+=.5*B-B*O*.5),h.bounds.min.x-=p.x,h.bounds.max.x-=p.x,h.bounds.min.y-=p.y,h.bounds.max.y-=p.y,h.mouse&&(s.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),s.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){h.context.setTransform(h.options.pixelRatio/((h.bounds.max.x-h.bounds.min.x)/h.options.width),0,0,h.options.pixelRatio/((h.bounds.max.y-h.bounds.min.y)/h.options.height),0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,d){var F,p=l.now(),m=h.engine,x=m.world,w=h.canvas,y=h.context,M=h.options,S=h.timing,I=r.allBodies(x),B=r.allConstraints(x),E=M.wireframes?M.wireframeBackground:M.background,R=[],T=[],H={timestamp:m.timing.timestamp};if(o.trigger(h,"beforeRender",H),h.currentBackground!==E&&P(h,E),y.globalCompositeOperation="source-in",y.fillStyle="transparent",y.fillRect(0,0,w.width,w.height),y.globalCompositeOperation="source-over",M.hasBounds){for(F=0;F<I.length;F++){var O=I[F];c.overlaps(O.bounds,h.bounds)&&R.push(O)}for(F=0;F<B.length;F++){var k=B[F],V=k.bodyA,b=k.bodyB,N=k.pointA,W=k.pointB;V&&(N=u.add(V.position,k.pointA)),b&&(W=u.add(b.position,k.pointB)),N&&W&&(c.contains(h.bounds,N)||c.contains(h.bounds,W))&&T.push(k)}e.startViewTransform(h),h.mouse&&(s.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),s.setOffset(h.mouse,h.bounds.min))}else T=B,R=I,1!==h.options.pixelRatio&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!M.wireframes||m.enableSleeping&&M.showSleeping?e.bodies(h,R,y):(M.showConvexHulls&&e.bodyConvexHulls(h,R,y),e.bodyWireframes(h,R,y)),M.showBounds&&e.bodyBounds(h,R,y),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(h,R,y),M.showPositions&&e.bodyPositions(h,R,y),M.showVelocity&&e.bodyVelocity(h,R,y),M.showIds&&e.bodyIds(h,R,y),M.showSeparations&&e.separations(h,m.pairs.list,y),M.showCollisions&&e.collisions(h,m.pairs.list,y),M.showVertexNumbers&&e.vertexNumbers(h,R,y),M.showMousePosition&&e.mousePosition(h,h.mouse,y),e.constraints(T,y),M.hasBounds&&e.endViewTransform(h),o.trigger(h,"afterRender",H),S.lastElapsed=l.now()-p},e.stats=function(h,d,p){for(var m=h.engine,x=m.world,w=r.allBodies(x),y=0,I=0,E=0;E<w.length;E+=1)y+=w[E].parts.length;var R={Part:y,Body:w.length,Cons:r.allConstraints(x).length,Comp:r.allComposites(x).length,Pair:m.pairs.list.length};for(var T in d.fillStyle="#0e0f19",d.fillRect(I,0,302.5,44),d.font="12px Arial",d.textBaseline="top",d.textAlign="right",R){var F=R[T];d.fillStyle="#aaa",d.fillText(T,I+55,8),d.fillStyle="#eee",d.fillText(F,I+55,26),I+=55}},e.performance=function(h,d){var m=h.timing,x=m.deltaHistory,w=m.elapsedHistory,y=m.timestampElapsedHistory,M=m.engineDeltaHistory,S=m.engineElapsedHistory,I=h.engine.timing.lastDelta,B=a(x),E=a(w),R=a(M),T=a(S),H=a(y)/B||0,O=1e3/B||0,b=60;d.fillStyle="#0e0f19",d.fillRect(0,50,370,34),e.status(d,10,69,b,4,x.length,Math.round(O)+" fps",O/e._goodFps,function(G){return x[G]/B-1}),e.status(d,82,69,b,4,M.length,I.toFixed(2)+" dt",e._goodDelta/I,function(G){return M[G]/R-1}),e.status(d,154,69,b,4,S.length,T.toFixed(2)+" ut",1-T/e._goodFps,function(G){return S[G]/T-1}),e.status(d,226,69,b,4,w.length,E.toFixed(2)+" rt",1-E/e._goodFps,function(G){return w[G]/E-1}),e.status(d,298,69,b,4,y.length,H.toFixed(2)+" x",H*H*H,function(G){return(y[G]/x[G]/H||0)-1})},e.status=function(h,d,p,m,x,w,y,M,S){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(d,p+7,m,1),h.beginPath(),h.moveTo(d,p+7-x*l.clamp(.4*S(0),-2,2));for(var I=0;I<m;I+=1)h.lineTo(d+I,p+7-(I<w?x*l.clamp(.4*S(I),-2,2):0));h.stroke(),h.fillStyle="hsl("+l.clamp(25+95*M,0,120)+",100%,60%)",h.fillRect(d,p-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(y,d+m,p-5)},e.constraints=function(h,d){for(var p=d,m=0;m<h.length;m++){var x=h[m];if(x.render.visible&&x.pointA&&x.pointB){var M,S,w=x.bodyA,y=x.bodyB;if(M=w?u.add(w.position,x.pointA):x.pointA,"pin"===x.render.type)p.beginPath(),p.arc(M.x,M.y,3,0,2*Math.PI),p.closePath();else{if(S=y?u.add(y.position,x.pointB):x.pointB,p.beginPath(),p.moveTo(M.x,M.y),"spring"===x.render.type)for(var R,I=u.sub(S,M),B=u.perp(u.normalise(I)),E=Math.ceil(l.clamp(x.length/5,12,20)),T=1;T<E;T+=1)p.lineTo(M.x+I.x*(T/E)+B.x*(R=T%2==0?1:-1)*4,M.y+I.y*(T/E)+B.y*R*4);p.lineTo(S.x,S.y)}x.render.lineWidth&&(p.lineWidth=x.render.lineWidth,p.strokeStyle=x.render.strokeStyle,p.stroke()),x.render.anchors&&(p.fillStyle=x.render.strokeStyle,p.beginPath(),p.arc(M.x,M.y,3,0,2*Math.PI),p.arc(S.x,S.y,3,0,2*Math.PI),p.closePath(),p.fill())}}},e.bodies=function(h,d,p){var M,S,I,B,m=p,w=h.options,y=w.showInternalEdges||!w.wireframes;for(I=0;I<d.length;I++)if((M=d[I]).render.visible)for(B=M.parts.length>1?1:0;B<M.parts.length;B++)if((S=M.parts[B]).render.visible){if(w.showSleeping&&M.isSleeping?m.globalAlpha=.5*S.render.opacity:1!==S.render.opacity&&(m.globalAlpha=S.render.opacity),S.render.sprite&&S.render.sprite.texture&&!w.wireframes){var E=S.render.sprite,R=A(h,E.texture);m.translate(S.position.x,S.position.y),m.rotate(S.angle),m.drawImage(R,R.width*-E.xOffset*E.xScale,R.height*-E.yOffset*E.yScale,R.width*E.xScale,R.height*E.yScale),m.rotate(-S.angle),m.translate(-S.position.x,-S.position.y)}else{if(S.circleRadius)m.beginPath(),m.arc(S.position.x,S.position.y,S.circleRadius,0,2*Math.PI);else{m.beginPath(),m.moveTo(S.vertices[0].x,S.vertices[0].y);for(var T=1;T<S.vertices.length;T++)!S.vertices[T-1].isInternal||y?m.lineTo(S.vertices[T].x,S.vertices[T].y):m.moveTo(S.vertices[T].x,S.vertices[T].y),S.vertices[T].isInternal&&!y&&m.moveTo(S.vertices[(T+1)%S.vertices.length].x,S.vertices[(T+1)%S.vertices.length].y);m.lineTo(S.vertices[0].x,S.vertices[0].y),m.closePath()}w.wireframes?(m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()):(m.fillStyle=S.render.fillStyle,S.render.lineWidth&&(m.lineWidth=S.render.lineWidth,m.strokeStyle=S.render.strokeStyle,m.stroke()),m.fill())}m.globalAlpha=1}},e.bodyWireframes=function(h,d,p){var w,y,M,S,I,m=p,x=h.options.showInternalEdges;for(m.beginPath(),M=0;M<d.length;M++)if((w=d[M]).render.visible)for(I=w.parts.length>1?1:0;I<w.parts.length;I++){for(m.moveTo((y=w.parts[I]).vertices[0].x,y.vertices[0].y),S=1;S<y.vertices.length;S++)!y.vertices[S-1].isInternal||x?m.lineTo(y.vertices[S].x,y.vertices[S].y):m.moveTo(y.vertices[S].x,y.vertices[S].y),y.vertices[S].isInternal&&!x&&m.moveTo(y.vertices[(S+1)%y.vertices.length].x,y.vertices[(S+1)%y.vertices.length].y);m.lineTo(y.vertices[0].x,y.vertices[0].y)}m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()},e.bodyConvexHulls=function(h,d,p){var x,y,M,m=p;for(m.beginPath(),y=0;y<d.length;y++)if((x=d[y]).render.visible&&1!==x.parts.length){for(m.moveTo(x.vertices[0].x,x.vertices[0].y),M=1;M<x.vertices.length;M++)m.lineTo(x.vertices[M].x,x.vertices[M].y);m.lineTo(x.vertices[0].x,x.vertices[0].y)}m.lineWidth=1,m.strokeStyle="rgba(255,255,255,0.2)",m.stroke()},e.vertexNumbers=function(h,d,p){var x,w,y,m=p;for(x=0;x<d.length;x++){var M=d[x].parts;for(y=M.length>1?1:0;y<M.length;y++){var S=M[y];for(w=0;w<S.vertices.length;w++)m.fillStyle="rgba(255,255,255,0.2)",m.fillText(x+"_"+w,S.position.x+.8*(S.vertices[w].x-S.position.x),S.position.y+.8*(S.vertices[w].y-S.position.y))}}},e.mousePosition=function(h,d,p){var m=p;m.fillStyle="rgba(255,255,255,0.8)",m.fillText(d.position.x+"  "+d.position.y,d.position.x+5,d.position.y-5)},e.bodyBounds=function(h,d,p){var m=p,w=h.options;m.beginPath();for(var y=0;y<d.length;y++)if(d[y].render.visible)for(var S=d[y].parts,I=S.length>1?1:0;I<S.length;I++){var B=S[I];m.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}m.strokeStyle=w.wireframes?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.1)",m.lineWidth=1,m.stroke()},e.bodyAxes=function(h,d,p){var y,M,S,I,m=p,w=h.options;for(m.beginPath(),M=0;M<d.length;M++){var B=d[M],E=B.parts;if(B.render.visible)if(w.showAxes)for(S=E.length>1?1:0;S<E.length;S++)for(y=E[S],I=0;I<y.axes.length;I++){var R=y.axes[I];m.moveTo(y.position.x,y.position.y),m.lineTo(y.position.x+20*R.x,y.position.y+20*R.y)}else for(S=E.length>1?1:0;S<E.length;S++)for(y=E[S],I=0;I<y.axes.length;I++)m.moveTo(y.position.x,y.position.y),m.lineTo((y.vertices[0].x+y.vertices[y.vertices.length-1].x)/2,(y.vertices[0].y+y.vertices[y.vertices.length-1].y)/2)}w.wireframes?(m.strokeStyle="indianred",m.lineWidth=1):(m.strokeStyle="rgba(255, 255, 255, 0.4)",m.globalCompositeOperation="overlay",m.lineWidth=2),m.stroke(),m.globalCompositeOperation="source-over"},e.bodyPositions=function(h,d,p){var y,M,S,I,m=p,w=h.options;for(m.beginPath(),S=0;S<d.length;S++)if((y=d[S]).render.visible)for(I=0;I<y.parts.length;I++)m.arc((M=y.parts[I]).position.x,M.position.y,3,0,2*Math.PI,!1),m.closePath();for(m.fillStyle=w.wireframes?"indianred":"rgba(0,0,0,0.5)",m.fill(),m.beginPath(),S=0;S<d.length;S++)(y=d[S]).render.visible&&(m.arc(y.positionPrev.x,y.positionPrev.y,2,0,2*Math.PI,!1),m.closePath());m.fillStyle="rgba(255,165,0,0.8)",m.fill()},e.bodyVelocity=function(h,d,p){var m=p;m.beginPath();for(var x=0;x<d.length;x++){var w=d[x];if(w.render.visible){var y=f.getVelocity(w);m.moveTo(w.position.x,w.position.y),m.lineTo(w.position.x+y.x,w.position.y+y.y)}}m.lineWidth=3,m.strokeStyle="cornflowerblue",m.stroke()},e.bodyIds=function(h,d,p){var x,w,m=p;for(x=0;x<d.length;x++)if(d[x].render.visible){var y=d[x].parts;for(w=y.length>1?1:0;w<y.length;w++){var M=y[w];m.font="12px Arial",m.fillStyle="rgba(255,255,255,0.5)",m.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(h,d,p){var w,y,B,E,m=p,x=h.options;for(m.beginPath(),B=0;B<d.length;B++)if((w=d[B]).isActive)for(y=w.collision,E=0;E<w.activeContacts.length;E++){var T=w.activeContacts[E].vertex;m.rect(T.x-1.5,T.y-1.5,3.5,3.5)}for(m.fillStyle=x.wireframes?"rgba(255,255,255,0.7)":"orange",m.fill(),m.beginPath(),B=0;B<d.length;B++)if((w=d[B]).isActive&&(y=w.collision,w.activeContacts.length>0)){var F=w.activeContacts[0].vertex.x,H=w.activeContacts[0].vertex.y;2===w.activeContacts.length&&(F=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,H=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),y.bodyB===y.supports[0].body||!0===y.bodyA.isStatic?m.moveTo(F-8*y.normal.x,H-8*y.normal.y):m.moveTo(F+8*y.normal.x,H+8*y.normal.y),m.lineTo(F,H)}m.strokeStyle=x.wireframes?"rgba(255,165,0,0.7)":"orange",m.lineWidth=1,m.stroke()},e.separations=function(h,d,p){var w,y,S,I,B,m=p,x=h.options;for(m.beginPath(),B=0;B<d.length;B++)if((w=d[B]).isActive){S=(y=w.collision).bodyA;var R=1;!(I=y.bodyB).isStatic&&!S.isStatic&&(R=.5),I.isStatic&&(R=0),m.moveTo(I.position.x,I.position.y),m.lineTo(I.position.x-y.penetration.x*R,I.position.y-y.penetration.y*R),R=1,!I.isStatic&&!S.isStatic&&(R=.5),S.isStatic&&(R=0),m.moveTo(S.position.x,S.position.y),m.lineTo(S.position.x+y.penetration.x*R,S.position.y+y.penetration.y*R)}m.strokeStyle=x.wireframes?"rgba(255,165,0,0.5)":"orange",m.stroke()},e.inspector=function(h,d){var y,m=h.selected,x=h.render,w=x.options;w.hasBounds&&(d.scale(1/((x.bounds.max.x-x.bounds.min.x)/x.options.width),1/((x.bounds.max.y-x.bounds.min.y)/x.options.height)),d.translate(-x.bounds.min.x,-x.bounds.min.y));for(var E=0;E<m.length;E++){var R=m[E].data;switch(d.translate(.5,.5),d.lineWidth=1,d.strokeStyle="rgba(255,165,0,0.9)",d.setLineDash([1,2]),R.type){case"body":y=R.bounds,d.beginPath(),d.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),d.closePath(),d.stroke();break;case"constraint":var T=R.pointA;R.bodyA&&(T=R.pointB),d.beginPath(),d.arc(T.x,T.y,10,0,2*Math.PI),d.closePath(),d.stroke()}d.setLineDash([]),d.translate(-.5,-.5)}null!==h.selectStart&&(d.translate(.5,.5),d.lineWidth=1,d.strokeStyle="rgba(255,165,0,0.6)",d.fillStyle="rgba(255,165,0,0.1)",y=h.selectBounds,d.beginPath(),d.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),d.closePath(),d.stroke(),d.fill(),d.translate(-.5,-.5)),w.hasBounds&&d.setTransform(1,0,0,1,0,0)};var n=function(h,d){var p=h.engine,m=h.timing,x=m.historySize,w=p.timing.timestamp;m.delta=d-m.lastTime||e._goodDelta,m.lastTime=d,m.timestampElapsed=w-m.lastTimestamp||0,m.lastTimestamp=w,m.deltaHistory.unshift(m.delta),m.deltaHistory.length=Math.min(m.deltaHistory.length,x),m.engineDeltaHistory.unshift(p.timing.lastDelta),m.engineDeltaHistory.length=Math.min(m.engineDeltaHistory.length,x),m.timestampElapsedHistory.unshift(m.timestampElapsed),m.timestampElapsedHistory.length=Math.min(m.timestampElapsedHistory.length,x),m.engineElapsedHistory.unshift(p.timing.lastElapsed),m.engineElapsedHistory.length=Math.min(m.engineElapsedHistory.length,x),m.elapsedHistory.unshift(m.lastElapsed),m.elapsedHistory.length=Math.min(m.elapsedHistory.length,x)},a=function(h){for(var d=0,p=0;p<h.length;p+=1)d+=h[p];return d/h.length||0},v=function(h,d){var p=document.createElement("canvas");return p.width=h,p.height=d,p.oncontextmenu=function(){return!1},p.onselectstart=function(){return!1},p},C=function(h){var d=h.getContext("2d");return(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)},A=function(h,d){var p=h.textures[d];return p||((p=h.textures[d]=new Image).src=d,p)},P=function(h,d){var p=d;/(jpg|gif|png)$/.test(d)&&(p="url("+d+")"),h.canvas.style.background=p,h.canvas.style.backgroundSize="contain",h.currentBackground=d}}()},function(D,L,g){var e={};D.exports=e;var c,o,u,f=g(5),l=g(17),r=g(0);typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),c||(c=function(s){u=setTimeout(function(){s(r.now())},1e3/60)},o=function(){clearTimeout(u)}),e.create=function(s){var i=r.extend({fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},s);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(.5*i.fps),i.fps=1e3/i.delta,i},e.run=function(s,t){return typeof s.positionIterations<"u"&&(t=s,s=e.create()),function i(n){s.frameRequestId=c(i),n&&s.enabled&&e.tick(s,t,n)}(),s},e.tick=function(s,t,i){var a,n=t.timing;s.isFixed?a=s.delta:(a=i-s.timePrev||s.delta,s.timePrev=i,s.deltaHistory.push(a),s.deltaHistory=s.deltaHistory.slice(-s.deltaSampleSize),a=Math.min.apply(null,s.deltaHistory),s.delta=a=(a=a<s.deltaMin?s.deltaMin:a)>s.deltaMax?s.deltaMax:a);var v={timestamp:n.timestamp};f.trigger(s,"beforeTick",v),s.frameCounter+=1,i-s.counterTimestamp>=1e3&&(s.fps=s.frameCounter*((i-s.counterTimestamp)/1e3),s.counterTimestamp=i,s.frameCounter=0),f.trigger(s,"tick",v),f.trigger(s,"beforeUpdate",v),l.update(t,a),f.trigger(s,"afterUpdate",v),f.trigger(s,"afterTick",v)},e.stop=function(s){o(s.frameRequestId)},e.start=function(s,t){e.run(s,t)}},function(D,L,g){var e={};D.exports=e;var f=g(8),r=g(0).deprecated;e.collides=function(c,o){return f.collides(c,o)},r(e,"collides","SAT.collides \u27a4 replaced by Collision.collides")},function(D,L,g){var e={};D.exports=e,g(1);var l=g(0);e.pathToVertices=function(r,c){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,u,s,t,i,n,a,v,C,h,d,P=[],p=0,m=0,x=0;c=c||15;var w=function(M,S,I){var B=I%2==1&&I>1;if(!C||M!=C.x||S!=C.y){C&&B?(h=C.x,d=C.y):(h=0,d=0);var E={x:h+M,y:d+S};(B||!C)&&(C=E),P.push(E),m=h+M,x=d+S}},y=function(M){var S=M.pathSegTypeAsLetter.toUpperCase();if("Z"!==S){switch(S){case"M":case"L":case"T":case"C":case"S":case"Q":m=M.x,x=M.y;break;case"H":m=M.x;break;case"V":x=M.y}w(m,x,M.pathSegType)}};for(e._svgPathToAbsolute(r),s=r.getTotalLength(),n=[],o=0;o<r.pathSegList.numberOfItems;o+=1)n.push(r.pathSegList.getItem(o));for(a=n.concat();p<s;){if((i=n[r.getPathSegAtLength(p)])!=v){for(;a.length&&a[0]!=i;)y(a.shift());v=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":t=r.getPointAtLength(p),w(t.x,t.y,0)}p+=c}for(o=0,u=a.length;o<u;++o)y(a[o]);return P},e._svgPathToAbsolute=function(r){for(var c,o,u,s,t,i,n=r.pathSegList,a=0,v=0,C=n.numberOfItems,A=0;A<C;++A){var P=n.getItem(A),h=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in P&&(a=P.x),"y"in P&&(v=P.y);else switch("x1"in P&&(u=a+P.x1),"x2"in P&&(t=a+P.x2),"y1"in P&&(s=v+P.y1),"y2"in P&&(i=v+P.y2),"x"in P&&(a+=P.x),"y"in P&&(v+=P.y),h){case"m":n.replaceItem(r.createSVGPathSegMovetoAbs(a,v),A);break;case"l":n.replaceItem(r.createSVGPathSegLinetoAbs(a,v),A);break;case"h":n.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(a),A);break;case"v":n.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),A);break;case"c":n.replaceItem(r.createSVGPathSegCurvetoCubicAbs(a,v,u,s,t,i),A);break;case"s":n.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(a,v,t,i),A);break;case"q":n.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(a,v,u,s),A);break;case"t":n.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),A);break;case"a":n.replaceItem(r.createSVGPathSegArcAbs(a,v,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),A);break;case"z":case"Z":a=c,v=o}("M"==h||"m"==h)&&(c=a,o=v)}}},function(D,L,g){var e={};D.exports=e;var f=g(6);g(0),e.create=f.create,e.add=f.add,e.remove=f.remove,e.clear=f.clear,e.addComposite=f.addComposite,e.addBody=f.addBody,e.addConstraint=f.addConstraint}])}}]);